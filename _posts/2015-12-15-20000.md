---
layout: post
title: edかexで<CR+LF>を<LF>に変換するバッチ編集は可能でしょうか
date: 2015-12-15 04:45:51
categories: shellscript
---
<!-- {% raw %} -->
<p>チームでプログラムしていると時々、ファイルの文字コードや改行コードを乱してしまう人がいます。私のチームでは<code>ruby on rails</code>を使った開発をしていて、ホストサーバーを<code>CentOS</code>と定めているため、最初から文字コードを<code>UTF-8</code>、改行コードを<code>LF</code>のみと定めています。</p>

<p>間違いの大半は<code>windows</code>で編集したファイルの改行コードが<code>CR</code>+<code>LF</code>に変換保存されてしまうことで起きています。それ自体は仕方ないのですが、何度も手で直すのが苦痛になってきました。<br>
<code>vi</code>で直すにはファイルをいちいち開かねばならず（しかも<code>vi</code>にそれほど詳しくもなく）、<code>sed</code>や<code>tr</code>コマンドを使うことも考えましたが、一旦オリジナルのファイルをどこかに退避させないと、元のファイルを上書きできません。</p>

<p>それで、<code>ed</code>や<code>ex</code>を使うスクリプトを作ればバッチでファイルの直接編集・保存ができるので上手くやれるんじゃないかと思いついた次第です。<br>
ですが制御文字を<code>ed</code>/<code>ex</code>で書き換えるサンプルを手早く見つけることができず、もしご存知の方がいらしたら教えていただけるとありがたいです。よろしくお願いします。</p>
<!-- {% endraw %} -->
