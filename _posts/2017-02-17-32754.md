---
layout: post
title: 前回アクセス日時から10分経過したかどうか知りたい場合、アクセス日時をクッキーへ格納しておく必要はある？
date: 2017-02-17 15:20:50
categories: php
---
<!-- {% raw %} -->
<p><strong>前回アクセス日時から10分経過したかどうかで条件分岐したいのですが、下記何れが(もしくは他の方法が)良いでしょうか？</strong><br>
・それぞれメリットデメリット等あれば教えてください</p>

<p><strong>案1.IDだけをクッキー格納</strong><br>
・初回アクセス時にID発行してクッキーへ格納<br>
・IDとアクセス日時はDBにも格納<br>
・次回アクセス時にID照合して、DBの格納値と現在時刻で計算</p>

<p><strong>案2.IDとアクセス日時をクッキーへ格納</strong><br>
・初回アクセス時にID発行してクッキーへ格納<br>
・IDとアクセス日時をクッキーへ格納<br>
・IDはDBにも格納<br>
・次回アクセス時にID照合して、クッキーの格納値と現在時刻で計算</p>

<p><strong>Q.</strong><br>
・わざわざDBアクセスするより、クッキー使用できる場合はクッキーを使用した方が良い？<br>
・クッキーは拒否される恐れがある？<br>
・クッキー拒否された場合は(クライアントから)ID自体を取得出来ないため、IDをDB格納していたとしても無意味？<br>
・例えば「Web Storage」を使用すれば必ず取得できるのでしょうか？</p>
<!-- {% endraw %} -->
