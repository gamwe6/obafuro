---
layout: post
title: "GCM　特定のパッケージにしか受信できないようにしたい。"
date: 2016-05-29 12:27:58
categories: android gcm
---
<p>GCMで特定のパッケージだけに通知を送信したいのですが、<br>
GoogleAPIのプロジェクトが違うアプリ同士でお互いの通知を受信してしまいます。<br>
GoogleAPIの違うプロジェクト　A、　B　があるとして、<br>
A　からは　B　の通知も受信でき、またその逆も可能となってしまっています。</p>

<p>どうやって受信先のパッケージを指定するのでしょうか？<br>
サーバー側でGCMに送信するときに　restricted_package_name　でアプリパッケージを指定しても全く効果なく、どちらでも受信できてしまいます。</p>

<p><strong>絶対だと分かっていること</strong></p>

<blockquote>
  <p>・GoogleAPIのプロジェクトは分けてある<br>
  ・サーバーのGCMに送信するときのパラメータ名などは間違っていない<br>
  ・受信側のアプリはパッケージが異なる（当たり前ですが）<br>
  ・受信側のアプリで、一般的な通知受信プロセス（マニフェスト、インテント、レシーバー、サービスを使用する方法ではこの現象は発生しない）<br>
  ・自分でレシーバーを動的に用意した時に発生する<br>
  ・GCMに送るとき、アプリでトークンを取得するときのIDは間違っていない</p>
</blockquote>

<p>後は、署名をリリースにしてみましたが、それもダメでした。（適当に試したので絶対とは言い切れない）</p>
