---
layout: post
title: "Gitデプロイに関する権限設定について"
date: 2016-06-23 07:15:06
categories: git
---
<p>いつもお世話になっています。<br>
サーバーの勉強を始めたばかりの初心者です。</p>

<p>先日、ユーザーのグループとパーミッション問題で躓き、こちらで助けて頂いたのですが、別途同様の疑問が発生しまして、再度質問させていただく事にしました。<br>
初歩的な質問かもしれません。申し訳ありません。</p>

<p>【前提】<br>
・Git環境構築のため、『git』ユーザを作成した<br>
・『/var/lib/git/test.git』にリモートリポジトリを作成している<br>
・Git環境を用意するまでは『admin』アカウントでFTPを行っていた</p>

<p>【やりたい事】<br>
・上記リモートリポジトリを公開領域『/var/www/html/test/』にデプロイしたい<br>
・同時に公開領域にFTPも出来るようにしたい</p>

<p>【過程】<br>
リモートリポジトリへのローカルからのPush、またリモートリポジトリからの公開領域へのCloneは問題なく行えています。<br>
『/var/lib/git/test.git/hooks/post-receive』への記述は</p>

<pre><code>#!/bin/sh
cd /var/www/html/test
git --git-dir=.git pull
echo test &gt;/tmp/test.log
</code></pre>

<p>となっており、最後のechoは動作確認用に入れていますが、出力されているのでpost-receiveは実行されているのではないか…と思っています。</p>

<p>【疑問】<br>
FTPとGitデプロイ両方、と言うのは難しいのでしょうか？<br>
色々とユーザグループ設定やchown、chmod等試してみたのですが、思うようにいかずに困っています。<br>
gitユーザをadminユーザに加えて（usermod -aG admin git）、公開領域のフォルダを775、ファイルを664にし、所有者設定はgit:adminにする事でFTPは出来たのですが、デプロイがされていないようです。</p>

<p>正常にデプロイされるためには、どのような設定にすべきなんでしょうか？<br>
権限周りの事をきちんと理解できておらず、本当に申し訳ありません。</p>
