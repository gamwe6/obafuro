---
layout: post
title: 意図せずプロセスが終了しない時の調査方法
date: 2019-11-14 06:31:46
categories: node.js
---
<p>非同期処理を多用したスクリプトで、全ての処理が完了してもプロセスが終了しないという現象が以前発生しました。当時はとりあえず一定時間を超えてプロセスが残っていたら強制終了するような仕組みで対応したのですが、最近になって「なにか非同期処理やタイマーが残っていてイベントループが終了しなかったのでは？」という仮説が浮かびあがりました。</p>

<p>処理が完了したところで <code>process.exit(0)</code> を呼べば確実に終了することはできると思いますが、実装にミスがある可能性を考えると、放置していても終了しない理由が知りたいです。</p>

<p>Node.jsのプロセスが意図せずして動き続けている場合、どのように調査するとよいでしょうか？</p>
