---
layout: post
title: 同じ処理ステップを別ルーティンとしてまとめることは可能？
date: 2017-04-18 00:15:07
categories: ruby-on-rails ruby
---
<p>お世話になります。多くの基本的なことを理解しないで<br>
自分のビジネスに関係したアプリをrailsで作って<br>
いるものです。アクションのコーディング中で同じ操作<br>
が結構あります。同じステップをいくつも記述するのはやはり<br>
余りに見苦しいし、無駄です。それでその部分をメソッドに<br>
するには、スコープの問題でやりにくい。あるいは<br>
引数があまりに数が大きくなりすぎる。オブジェクト化<br>
するほどでもないし、ちょっと大げさ過ぎます。このような<br>
コーディングの時、簡単に同じ部分だけを別の個所に記述<br>
して他のアクションとあるいは同じアクション内で共有する<br>
ことはできないでしょうか？<br>
VBAでは何か関数のオプションでできたような記憶が<br>
ありますが、rubyでは可能ですか？よろしくお願い<br>
します。</p>

<hr>

<p>例えば次のようなステップがあるとします。</p>

<p>filea.field_a = ary[1]<br>
filea.field_b = ary[2]<br>
filea.field_c = ary[5]<br>
filea.field_d = ary[6].to_i<br>
          ・<br>
          ・<br>
          ・<br>
          ・<br>
          ・<br>
          ・</p>

<p>このコーディングは変えたくない,<br>
そして、数箇所繰り返して出現するとします。<br>
当然同じものをコーディングしたくありません。<br>
従って、どこか一か所に書いて共有して使えれば<br>
便利ですし、コーディングミスも防げます。</p>

<hr>

<p>フィールド名は違うかも知れないが内容は殆んど<br>
同じです。renderで理解できないエラーが出たのと、<br>
newとeditのアクションはコンピューターで判断<br>
させた方がユーザーには親切だと思い、つまり<br>
入力でキーが重複したときは自動的にedit画面に<br>
導いた方がユーザは助かります。<br>
そしてrenderを使わないで、すべてredirect_toで入力ミスを返しているので<br>
アクション毎の入力データをすべてファイルで管理する<br>
必要が有り、配列データで各フィールの値を持っています。<br>
そして配列フィールドから最終的にマスターに登録します。<br>
確かに異常なコーディングかもしれません。でもひと昔の<br>
言語cobol等では簡単にできたものです。そして普通でした。</p>
