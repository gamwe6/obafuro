---
layout: post
title: シェルスクリプトで、 ruby でいう ensure がやりたい
date: 2016-06-12 05:46:48
categories: bash shellscript
---
<!-- {% raw %} -->
<p>シェルスクリプトで、何が起ころうが基本的にスクリプトが終了する直前に実行してほしいコマンドがあるとします。今の具体的な想定としては、 mktemp で作ったディレクトリの削除です。</p>

<p>シェルスクリプトは、通常であれば上から順番にコマンドを実行していき、最後に終了しますが、ぱっと思いつくかぎりでも、以下のケースで (スクリプトの途中で) 終了します。</p>

<ul>
<li>exit コマンドの実行</li>
<li>sigint, sigterm などのシグナルの受信</li>
</ul>

<p>これらの場合でも、適切に終了処理を実行してくれるシェルスクリプトは記述できますか？</p>
<!-- {% endraw %} -->
