---
layout: post
title: Amazon Aurora MySQLでテーブルが更新されたことを検知する方法
date: 2019-10-29 03:21:23
categories: mysql aws redis
---
<p>Amazon Aurora MySQLにおいて、テーブルが更新されたかどうかを検知する方法を探っています。名案があれば教えて教えて頂きたいです。</p>

<p>目的：Elasticache(Redis)に保持しているクエリ結果のキャシュ更新<br>
背景：テーブル更新をトリガーにして、キャッシュ更新を"アプリ外"から行いたい為</p>

<p>●期待している処理構成<br>
[Aurora MySQL] -テーブル更新通知-> [Lambda] -キャシュ更新-> [Elasticache]</p>

<p>下記の案を検討していましたが、デメリットが多かった為に採用に至らなかったです。</p>

<p>検討していた案…TriggerからLambda起動<br>
　内容：全テーブルにTriggerを仕込み、更新があった場合にLambda通知<br>
　難点：全テーブルに仕込む必要がある。更新時、更新”行”毎にトリガーが起動されてしまう。</p>

<p>その他に期待している方法としては、MySqlのバイナリログ(トランザクションログ)から更新テーブルを検知できないか調査予定です。</p>

<p>よろしくお願いいたします。</p>
