---
layout: post
title: データベースにhtmlを保存すべきか
date: 2015-09-26 17:39:53
categories: database データベース設計
---
<!-- {% raw %} -->
<p>php + mysqlなどで掲示板を作るとして、投稿フォームで入力された本文からURLを検出してaタグのリンクをつけるとします。もちろん、改行コードはbrタグやpタグに変換して表示します。</p>

<p>この場合、データベースにはhtml化した本文を保存すべきでしょうか。<br>
それとも、フォームで入力されたtextを保存すべきでしょうか。</p>

<p>htmlを保存する場合、本文を表示する際にサーバーでの処理負荷が少ないですが、データベースの容量は膨れ上がってしまいます（検索機能を考えるとtextも同時に保存すべきであることも考えると2倍以上です）。</p>

<p>逆に、textを保存する場合、データベースの容量は抑えられますが、本文を表示する際に毎回URLを検出してaタグリンクをつけるという処理が発生し、サーバーへの負荷は（比較すると）大きいはずです。</p>

<p>このように、容量をとるか、処理負荷をとるかのジレンマに陥っています。</p>
<!-- {% endraw %} -->
