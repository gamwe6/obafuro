---
layout: post
title: 数列を許容範囲でグループ化(分割)する方法を教えて下さい。
date: 2018-10-08 16:59:39
categories: python アルゴリズム
---
<pre><code>例
input 数列　{1, 2, 2.01, 3}　と　許容誤差(範囲)=0.1
output　  　{1} {2, 2.01} {3}
</code></pre>

<p>①タイトルで意味が通じますか？正式名称があれば教えて下さい。検索語が思いつきませんでした。<br>
②outputを、区切り1.5と2.5(2.8でも可)にする予定です。<br>
③特に言語にこだわりません。おすすめのページがあれば教えて下さい。<br>
よろしくお願いします。　</p>

<p>2018ー10ー10ーーー<br>
仕様が不十分でした。<br>
「以上」、「四捨五入」は、想定していません。<br>
区切りの意味について、<br>
最初の区切りは、グループ1の最後の値とグループ2の最初の値の平均=(1+2)/2=1.5<br>
次  の区切りは、グループ2の最後の値とグループ3の最初の値の平均=(2.01+3)/2=2.505<br>
以下同文</p>

<pre><code>import numpy as np
maxgap=0.1
a = np.array([1, 2, 2.01, 3])
d = a[1:] - a[:-1]
i = np.where(d &gt; maxgap)[0]
output = (a[i] + a[i+1])/2
print(a)
print(output)
# [1.   2.   2.01 3.  ]
# [1.5   2.505]-----------できました。
</code></pre>

<p>例2<br>
数列の差で0.1がある時、次のようになると思います。<br>
input 数列{1.0, 1.05, 1.2, 1.3, 2.0, 3.0}と許容誤差(範囲)=0.1<br>
output    {1.0,1.05} {1.2} {1.3} {2.0} {3.0}<br>
区切り    1.125,1.25,1.65,2.5</p>

<pre><code>import numpy as np
maxgap=0.1
a = np.array({1.0, 1.05, 1.2, 1.3, 2.0, 3.0})
d = a[1:] - a[:-1]
i = np.where(d &gt; maxgap)[0]
output = (a[i] + a[i+1])/2
print(a)
print(output)
# File "C:/Users/xxx/.PyCharmCE2018.2/config/scratches/scratch_29.py", line 27, in &lt;module&gt;
# d = a[1:] - a[:-1]
# IndexError: too many indices for array
</code></pre>

<p>すみません。ループの使い方を教えて下さい。<br>
よろしくお願いします。</p>

<p>cluster analysisやyieldやCausal Clusteringについては、これから勉強したいと思います。</p>

<p>2018-10-12----------------------------------------------------------------<br>
「許容誤差(範囲)」という表現が間違っていました。「次の値との差」の意味でした。<br>
仕様<br>
「小さい順の数列で、次の値との差が、0.1以上の時に区切る。<br>
  区切る値は、次の値との平均とする。」<br>
同じ仕様?<br>
「小さい順の数列で、次の値との平均値との差が、0.05（＝0.1/2)以上の時に区切る。」<br>
  その平均値を区切る値とする。」</p>

<blockquote>
  <p>この場合のグループ分けはどうするのでしょうか。 <br>
  input 数列{1, 1.06, 1.12}と「次の値との離れ」=0.1<br>
  output    {1, 1.06, 1.12}<br>
  グループ分けなし(分割なし)<br>
  1.06-1   =0.06 &lt; 0.1 区切らない<br>
  1.12-1.06=0.06 &lt; 0.1 区切らない<br>
  確かに、連続したらグループ分けなし(分割なし)があります。</p>
</blockquote>

<p>大きな離れと小さな離れで、グループ分けを想像していました。<br>
等間隔を想定していませんでした。その時は、0.1を小さくします。<br>
「maxgap?」ピンときませんね。</p>
