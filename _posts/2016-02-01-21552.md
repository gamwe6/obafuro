---
layout: post
title: "uClinuxにおけるメモリ割り当て"
date: 2016-02-01 01:57:00
categories: linux メモリ管理
---
<p>現在uClinux上のソフト開発をしている者です。</p>

<p>開発中のソフトを長時間実行すると、</p>

<p>Allocation of length 69632 from process 7238 (cut) failed</p>

<p>などと言うカーネルメッセージ(dmesg)が出力され、最終的にOSごとクラッシュしてしまいます。</p>

<p>色々とハックした結果、どうやら新たなプロセスにメモリを割り付けようとしたが、利用可能な連続領域が足りなくなったことが原因のようだと推定しています。</p>

<p>そこで、ページ情報(struct page)を可視化するツールを作成し、中身を見たところ、flagsが0で、_countが非0(具体的には1)のページが多数見られました。</p>

<p>カーネルのメモリ管理上、このような状態はありうるのでしょうか?または、flagsが0の場合、_countのフィールドは無視されるのでしょうか?</p>

<p>カーネルのソースを追っていけばわかるのでしょうが、ご存知の方がいらっしゃればご教示いただきたく。</p>

<p>よろしくお願いします。</p>
