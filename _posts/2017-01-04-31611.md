---
layout: post
title: JARに内包した「ライブラリJAR」を動的に切り替えたい
date: 2017-01-04 09:32:48
categories: java eclipse
---
<p>同じ構造を持つjarライブラリがあります。<br>
それぞれのjarライブラリはデバッグ接続用、リリース接続用のような感じで<br>
<strong>jarを切り替えるだけでそれら処理が切り替わるように内部には同じパッケージで同じクラスが存在</strong>します。</p>

<p>eclipseのプロジェクトにて、<strong>プログラミングするときだけこれらをクラスパスに含め</strong><br>
エラーが出ないように＆メソッドなどがわかるように（リフレクションなしで普通に開発できるように）して、<strong>実際にjarを出力するときにはこれらjarをクラスパスから除外</strong>し、<br>
でもjarには内包して定義したクラスローダーから動的に切り替えようと思いました。<br>
が、うまくいきませんでした。</p>

<p>この方法で実現可能な方法はありますか？（jarに含めたライブラリを動的に切り替える　でもプログラミングするときは可視的に行いたいのでクラスパスに含めたときと同じ感覚で行いたい）</p>

<p>一番それっぽいことは試しました。</p>

<blockquote>
  <p>・Java Build Path 設定にて　jarライブラリを追加する これにより開発時には普通にプログラミングできる</p>
  
  <p>・jar生成時にクラスパスに通さないために RunConfiguration　の　クラスパス　タブにて　User Entries　を消して<br>
  Add<br>
  Project　で再度追加して　ライブラリjar　を除外しましたが、これを行うと　jar　に　jarライブラリが含まれない状態になってしまいました。</p>
</blockquote>
