---
layout: post
title: emacsでスクラッチバッファのテキストを自動保存したい。
date: 2015-06-27 08:23:47
categories: emacs emacs-lisp
---
<p>軽いメモを取るときにGmailのメール下書きを利用しています。</p>

<p>理由としては、PCがフリーズしてもGmailの下書きであれば、データが残るからです。</p>

<p>MacOS X Yosemiteを利用していますが、何故かブラウザで動画を閲覧しているとフリーズすることが頻繁に発生します。（Flashのせい？）</p>

<p>本日、たまたまEmacsでメモをとっており、メモの途中で電話が入り、そこで動画を閲覧していたところ、OSがフリーズしてしまいました。</p>

<p>マルチディスプレイで、Emacsを画面に表示したままだったので、アナログ的にモニタをiphoneのカメラで撮影することで、なんとかテキストを失うことは避けれたのですが、これがディスプレイに表示されていなかったらということを考えるとフリーズが恐ろしくてたまりません。</p>

<p>いちいちGmailを利用するのも面倒なので、Emacsのスクラッチバッファが自動保存される仕組みが作ることができればよいのでは？とおもいました。</p>

<p>既にemacsでファイルを保存すると、その段階で<code>~/.emacs.d/backup</code>にもバックアップを作成するような設定は行っていますので（１日だけでものすごい大量のファイルが作られますが）、スクラッチバッファのテキストを<code>~/.emacs.d/.scratch</code>などに自動保存できれば、恐らくそれだけで世代バックアップもできると考えられますので素敵だなと思っています。</p>

<p>emacsで指定時間放置または指定文字以上の編集が行われた時に自動保存する仕組みが備わっているのは、わりとよく聞く話で、検索すると設定方法も出てくるのですが、この自動保存の仕組をスクラッチバッファのみ有効にする方法がわかりません。できれば、その自動保存の条件（放置時間やタイプ数）もカスタマイズしたいとおもっていますので、以下の３点を教えていただきたいです。</p>

<ol>
<li>スクラッチバッファを自動保存するelisp</li>
<li>操作の放置による自動保存発動時間の設定方法</li>
<li>テキスト入力数による自動保存発動文字数の設定方法</li>
</ol>

<p>よろしくお願いいたします。</p>
