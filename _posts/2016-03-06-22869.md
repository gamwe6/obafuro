---
layout: post
title: "通信先のスマートフォンが通信制限がかかっているか判断するには？　通信制限時には荒い画像を送信して体感速度を上げたい"
date: 2016-03-06 21:32:18
categories: network
---
<p>スマートフォンには通信制限というものがあってこの通信制限にひっかかるとサーバーからの画像の転送が著しく遅くなり、体感速度がかなり悪くなってしまいます。</p>

<p>そこで、サーバー側でスマートフォンとの通信速度（スマートフォン側からみたダウンロード速度）を測定して、基準値（例えば通信速度が100kbs以下）の場合は荒い画像を送信するなどして体感速度を上げたいと思っています。</p>

<p>サーバー側でスマートフォンとの通信速度を知ることができれば可能なのですが<br>
そもそもサーバー側でスマートフォンとの通信速度を知ることは可能なんでしょうか？</p>

<p>調べた感じでは <code>ping</code> コマンド <code>-s</code> オプションなどで送信するパケットサイズを調整することが可能であったり、 スマートフォン側からサーバー側のサイズの大きいダミーファイルをダウンロードさせて通信速度を調べるなどが考えられますが、ユーザーにサイズの大きいファイルをダウンロードさせると通信料を余計に消費させることにもなりかねず、なるべく通信料を抑えた方法でユーザーのスマートフォン側の通信速度を調べることはできませんか？</p>
