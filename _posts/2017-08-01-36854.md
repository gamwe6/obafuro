---
layout: post
title: WEBブラウザゲームのデータベース設計について
date: 2017-08-01 11:39:44
categories: postgresql database
---
<p>現在、以下のページのようなWEBブラウザゲームを作成しています。<br>
<a href="http://strawberry-magic.com/play.html" rel="nofollow noreferrer">http://strawberry-magic.com/play.html</a><br>
シーン内にレンガや、敵キャラを配置することで自分でステージを作っていくゲームです。<br>
RPGツクールやMinecraft、マリオメーカーのような方向性を目指しています。</p>

<p>今後、サイト内にユーザー認証機能を実装して、データベースと接続することで<br>
ユーザーごとに作ったステージを保存できるようにしたいと思っています。</p>

<p>そこで、データベース設計の壁にぶつかっています。<br>
このようなゲームの場合、ステージが何十個、何百個も作られることになると思うのですが<br>
ステージ内のアイテムの情報も何百、何千と膨大になるかと思います。<br>
こういった場合、1つのステージごとにデータベースのテーブルを1つ作るのか<br>
それとも複数のステージの情報を1つのデータベースのテーブルの中に入れてしまうのが良いのか<br>
どちらなのでしょうか？それとも全く別のアプローチが良いのでしょうか？</p>

<p>使用しているデータベースはPostgreSQLで<br>
sequelizeやNodeJSと組み合わせて使用するつもりでいます。</p>

<p>設計しようと思っているテーブルは以下のような形です。<br>
ステージ内の全ピクセルに対して01010111100といった形で情報を埋め込むと<br>
データ量が多くなりすぎるかと思ったので<br>
ステージ内に配置した敵キャラクターの位置情報やブロックの位置情報は<br>
配列の奇数ケタにx座標、配列の偶数ケタにy座標、というように入れていこうかと思っています。</p>

<p><a href="https://i.stack.imgur.com/HAuYz.png" rel="nofollow noreferrer"><img src="https://i.stack.imgur.com/HAuYz.png" alt="画像の説明をここに入力"></a></p>
