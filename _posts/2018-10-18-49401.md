---
layout: post
title: SPRESENSE GNSS測位情報のNMEA出力方法について
date: 2018-10-18 01:34:25
categories: spresense
---
<!-- {% raw %} -->
<p>プログラミング初学者です。SPRESENSEのGNSS測位機能を使いたく、手始めにサンプルプログラムを試しています。<br>
各種測位情報をNMEAフォーマット出力で得たいと考えていますが、Arduino IDEのサンプルスケッチ"gnss_tracker.ino"は現状ではGGAセンテンスのみの対応のようで、少々機能不足です。<br>
一方、Spresense SDKのほうのサンプルプログラム"gnss_atcmd"ではNMEAフルセンテンス出力ができそうですが、こちらの使用方法がよくわかりません。とりあえずそのままビルドしてみたのですが、USBシリアルデバイス/dev/ttyACM0がopenできない旨のメッセージ表示が出てうまく動きません。プログラムの関係ありそうな箇所のデバイス名を変更(/dev/ttyUSB0、/dev/ttyS*など)してみても状況はさほど変わりません。<br>
公式デベロッパーズガイドにも現状では有用な情報が掲載されておらず(ソースを参照しろとしか書かれていない)、少々行き詰っています。正しい使用方法もしくはプログラム修正のヒントについてご教示いただければありがたいです。<br>
(2018.10.26追記)<br>
1週間経過してもコメント・回答が全く付かないことから、私の質問の仕方が良くなかったものと理解しましたので、長くなって恐縮ですが情報を追加します。<br>
サンプルプログラムgnss_atcmdは、コマンド入力およびNMEA出力にUSBシリアルデバイスをデフォルトで使用するように作られていますが、そもそもチュートリアルで説明されている通常の実行環境ではUSBシリアルはシェル(nsh)コンソールとしてすでに占有されているので、このプログラムはそのままでは使用できないように思います。(理解が間違っていたらご指摘ください)<br>
したがって、USBシリアルではなくもうひとつのシリアルポート(UART2)を使うようにプログラムを修正するか、もしくはnshシェルを使わずにNuttX上のコマンドを自動実行できる環境を構築するしかなさそうです。<br>
折しも昨日、SDKのアップデートがありましたが、残念ながらgnss_atcmdに関して有用な情報の追加はありませんでした。未だに使用方法や各コマンドの解説などが無く、理解が難航しています。</p>
<!-- {% endraw %} -->
