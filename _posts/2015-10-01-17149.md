---
layout: post
title: SDWebImageを使用して取得した画像の高さ変更がうまくできない
date: 2015-10-01 14:03:40
categories: ios swift uitableview
---
<!-- {% raw %} -->
<p>SDWebimageで取得した画像をカスタムCell上のUIImageViewに表示させたのですが、 CGRectMake等で画像の高さを指定してもうまく効いてくれません。<br>
現状、画像幅について仕様通りスクリーン幅になってますが、高さがいうことを効かず画像が縦長になっています。これをうまく高さ調整したいです。</p>

<p>FacebookやTumblerアプリのタイムラインのような、画像が画面幅にfixしたUIを実現させたいです。いくつかの方法を試したのですが、どれも納得のいくものではありませんでした。<br>
同じ問題に遭遇した方、もしくは何かしら解決案がある方、相談にのっていただけたら幸いです。</p>

<h1>実装について</h1>

<ol>
<li>画像の取得には<a href="https://github.com/rs/SDWebImage" rel="nofollow">SDWebImage</a>を使用しています。</li>
<li>画像のWidthはスクリーン幅、HeightはWidthの拡大・縮小比に合わせて動的に決定してます。なので、それぞれの画像は高さが異なります。</li>
<li>Storyboard上で、画像にはAutolayoutの制約を横幅0pxで左右つけてます。画像幅に関してはうまく実現できています。</li>
<li>現状、SDWebimageのコールバックで画像の幅高さ等を決めてます。(効いていない)</li>
</ol>

<h1>試してみてうまくいかなかった方法</h1>

<ol>
<li>それぞれのCellで、画像の高さのAutolayout制約を加える。</li>
<li>それぞれのCellで、SDWebimageで取得した画像にFrameを設定する。</li>
</ol>

<h1>うまくいったが納得いかない、もっといい方法があるのではないかという方法</h1>

<ol>
<li>それぞれのCellで、SDWebimageで取得した画像をリサイズして表示する。<br>
→Tableがスクロール時にかくつく、リサイズするので画質が悪くなる</li>
<li>APIから画像の高さも返すようにして、テーブル側で高さ計算する<br>
→きっともっといい方法があるはず</li>
</ol>

<p>解決したいので、もしわかりにくい点がありましたら補足させてください。<br>
お時間いただける方よろしくお願いします。</p>
<!-- {% endraw %} -->
