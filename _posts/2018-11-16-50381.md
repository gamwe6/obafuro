---
layout: post
title: ランキングの取得と更新の計算量のうち、最悪の計算量を最小化するには？
date: 2018-11-16 10:44:13
categories: アルゴリズム
---
<!-- {% raw %} -->
<p>ゲームのスコアランキングを考えます。各ユーザーに対して、スコアがただ一つ紐づいているとします。このとき、あるユーザーが与えられた時、全ユーザーの中で何番目のスコアを持っているかを知りたいとします。</p>

<p>このようなランキングのデータ構造は、取得と更新の計算量がトレードオフの関係にあると思います。</p>

<p>というのも、例えば各ユーザスコアデータについて、愚直にユーザーをキーにしたハッシュテーブルに入れておき、取得のタイミングで全テーブルを検索して、自分よりも大きなスコアを持つ要素をかぞえあげるとします。その場合、計算量は以下になります。</p>

<ul>
<li>更新系: O(1) ※hash index であった場合</li>
<li>取得系: O(N)</li>
</ul>

<p>また逆に、すべてのユーザーについてランキングをあらかじめ計算しておくとします。その場合、愚直に考えれば、全ての要素について見ていって、更新ユーザーの更新前と後の間の値のユーザースコアを持つユーザーのランクを、+/- 1 していくことで、更新できます。この場合、計算量は以下です。</p>

<ul>
<li>更新系: O(N)</li>
<li>取得系: O(1) ※ hash index であった場合</li>
</ul>

<h1>質問</h1>

<p>ランキングをデータ上に保持するとして、その取得系と更新系の計算量のうち、最悪の方について常に着目する場合、それはどこまで最小化できますか？</p>
<!-- {% endraw %} -->
