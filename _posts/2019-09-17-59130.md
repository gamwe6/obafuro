---
layout: post
title: "テーブル結合時のドメイン"
date: 2019-09-17 22:58:48
categories: ドメイン駆動設計
---
<p>Userテーブルがあるとします。<br>
このUserテーブルはnameとcreatedAtのプロパティを持つとします。<br>
また、Addressも存在し、こちらではユーザの住所を管理します。</p>

<p>ユーザ情報は基本的に名前だけあれば良いですが、一部で住所つきのユーザ情報を表示する必要があるので、UserテーブルとAddressテーブルを結合する必要があります。また、ユーザ一覧の表示もあるものとします。</p>

<p>この際の、ドメインとエンティティはどのように作るか、ですが、以下の考え方は正しいでしょうか。</p>

<ul>
<li>Userエンティティをつくる</li>
<li>Addressエンティティをつくる</li>
<li>Userドメインという、Userエンティティ型のプロパティをもつ構造体をつくる</li>
<li>Usersドメインという、Userエンティティの配列型のプロパティをもつ構造体をつくる</li>
<li>UserWithAddressという、Userエンティティ型とAddressエンティティ型のプロパティをもつ構造体をつくる</li>
<li>Addressは単体で扱われることはないので、Addressドメインはつくらない</li>
</ul>

<p>そして、テーブルの結合がある際は、Userエンティティのファクトリメソッドで、Addressと結合されたデータを取得する、この際の戻り値の型はUserWithAddress型である。</p>

<p>というのが私の現在の理解です。</p>

<p>ただ、テーブルが、3つ結合しないといけない、といった際は、命名を考えないと、大変なことになりそうです。</p>

<p>まだわかっていない部分も多いので、アドバイスをいただきたく思います。<br>
よろしくお願いします。</p>
