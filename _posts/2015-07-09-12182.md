---
layout: post
title: fopenのモードによるfwriteの挙動の違いについて
date: 2015-07-09 03:10:16
categories: c
---
<p>UnityのC#側でダウンロードしてきたデータをネイティブに保存するライブラリを作っています。</p>

<p>ファイルのオープン・クローズのタイムラグを減らしたいので、<br>
iOS・Androidアプリ起動時はファイルをオープンしたまま閉じないようにしています。</p>

<p>ダウンロードファイルの実体はあるファイルに追加書き込みとなるため、</p>

```
fopen(実体用ファイルパス,"a+b");
```

<p>実体ファイルをハッシュ・位置・サイズを用いて管理するファイルは<br>
Map形式なので全体書き込みとなるため、</p>

```
fopen(実体管理用ファイルパス,"w");
```

<p>としています。</p>

<p>上記、実体用ファイルはfwriteのたびにファイルの中身が更新されるのですが、<br>
実体管理用ファイルはfwriteだけでは更新されず<br>
fcloseしないとファイルの中身が更新されません。</p>

<p><strong>■質問</strong><br>
　●ファイルの先頭から末端までをオープンしたまま<br>
　　書き込む場合、どのようにすれば良いでしょうか？<br>
　　（ファイルが巨大になっても良いようにできる限りfcloseを最小限にしたいです。）</p>

<p>　●また、fwriteの内部の細かい仕様が記載されたページなどあれば<br>
　　教えていただけませんか？<br>
　　(どのモードの時は、ファイルにかかれるのか？メモリ上にしか持っていないのか？)</p>
