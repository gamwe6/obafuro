---
layout: post
title: "メールアドレスに記号を許すことによるリスクはありますか？"
date: 2019-11-21 14:44:49
categories: security mail
---
<p>Gmail ではメールアドレスに <code>+</code> 記号を付けることでひとつのアカウントのメールアドレスに<a href="https://gmail.googleblog.com/2008/03/2-hidden-ways-to-get-more-from-your.html" rel="noreferrer">タグを付けて扱うことができます</a>。しかしたとえばユーザー登録時のメールアドレスに <code>+</code> 記号が含まれていると「正しいアドレスを入力してください」とバリデーションエラーを出すウェブアプリにしばしば遭遇します。</p>

<p>RFC 5322 によると、メールアドレスのローカルパートには記号 <code>!#$%&amp;'*+-/=?^_`{|}~</code> を含むことができます。なのでバリデーション側が間違っていることになります。</p>

<p>ただもしかすると、メールアドレスの仕様では OK でも、裏側で動いているシステムにおいて NG なことがあるのかもしれません。たとえば何かしらセキュリティリスクがあって許しておらず、そのエラーメッセージがたまたま「アドレスが間違っている」というものになっているのかもしれません。もしそうなのであれば自分でアプリを作る際に注意しておきたいです。逆に、単に歴史的理由や特定のライブラリのバグなのであれば気にする必要が無くなります。</p>

<p>そこで、質問です。メールアドレス内に記号（特に <code>+</code>）を許すことによるリスクはありますか？　あるならば、どのようなものでしょうか？　それは適切なエスケープを課すなどして避けられないものなのでしょうか？</p>
