---
layout: post
title: Math.hを使用できない環境でのべき乗計算
date: 2017-06-30 05:48:15
categories: c
---
<!-- {% raw %} -->
<p>お疲れ様です。<br>
C環境で、ガンマ補正関連の画質処理を作成しているのですが、<br>
速度をなるべく早くするということでMath.hを禁止され、<br>
どのようにべき乗計算をするか分からない状態であり、<br>
もしこうして解決したなどの経験がございましたらご教授ください。</p>

<p><strong>【実行したいこと】</strong><br>
ガンマ2.2などの画質変換用のLutテーブル作成</p>

<p><strong>【Math.hがあれば実装していたであろう内容】</strong><br>
①ガンマ2.2の画像のガンマを外す<br>
    ＝(Y / Y最大値) ^ (2.2)<br>
②ガンマ2.2に再度なおす<br>
    ＝(①の結果) ^ (1.0 / 2.2) * Y最大値<br>
    //// ＝(Y) ^ (1.0 / 2.2) * Y最大値 <strong>//間違い</strong></p>

<p>※このべき乗をpowでやる予定でした。</p>

<hr>

<p>&lt;追記><br>
・YおよびYの最大値は整数になります。10bit 0-1023になります。<br>
・ガンマ値は固定値で、ガンマ2.2、ガンマ1.8、ガンマ2.6‌​で変換をかける予定です。<br>
・「速度 > 精度」の優先順位になっています。<br>
・②の式が間違っていたので修正いたしました。<br>
　①と②は基本ワンセットになっていると思ってください。(片方だけ実行することはない)</p>

<p>以上、よろしくお願いいたします。</p>
<!-- {% endraw %} -->
