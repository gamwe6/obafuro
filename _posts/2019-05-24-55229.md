---
layout: post
title: awk コマンドによる列の並び替えでCRLF改行コードの扱いについて
date: 2019-05-24 23:36:13
categories: csv awk
---
<!-- {% raw %} -->
<p>はじめまして。<br>
目的: 改行コードCRLFのcsv ファイルで列の並びを変更したい<br>
手段: awk コマンドによって指定<br>
例: </p>

<pre><code>$ cat sample.csv
1,2,3
4,5,6
$ cat sample.csv | awk 'BEGIN{FS=",";OFS=","} {print $3,$2}' &gt; out.csv
3,2
6,5
</code></pre>

<p>このとき、列の順番は期待通りの結果なのですが、最終列に一緒についていると思われるCRコードが一緒に移動してしまいます。</p>

<pre><code>$ cat -e out.csv
3^M,2$
6^M,5$
</code></pre>

<p>回避策は列変換処理を行う前に、改行コードをCRLF -> LF にした上で処理するという形になるのでしょうか？ (列変換後に取り込むツールが"sjis, CRLF"のファイルのみという仕様なので変換がひと手間になってしまい避けたく・・・)</p>
<!-- {% endraw %} -->
