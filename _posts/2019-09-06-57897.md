---
layout: post
title: 圧縮ファイルの展開をundoしたい
date: 2019-09-06 05:45:56
categories: linux tar
---
<p>このようなディレクトリ構造で、</p>

<pre class="lang-none prettyprint-override"><code>.
├── foo
│   ├── bar
│   └── baz
└── foo.tar.gz
</code></pre>

<p>圧縮ファイルの展開結果と同名のディレクトリ <code>foo</code> に気付かず展開コマンド <code>tar -xf foo.tar.gz</code> を実行してしまい、<code>foo</code> 以下に元々あったファイルと新しく展開されたファイルが混ざってしまいました。（実際はもう少したくさんのファイルと深いディレクトリ構造があります。）</p>

<p>混ざってしまうとマズいので展開してしまったファイルだけ削除したいのですが、どのようにすると手っ取り早いでしょうか？</p>

<p>なお、ファイルが上書きされてしまうと戻せない気がしますが、<code>foo.tar.gz</code> を別の場所で展開して自分の記憶と照合する限り同名ファイルは無いように思うので、上書きは無いものと仮定して頂いて構いません。同名ディレクトリはありました。また、もし上書きの可能性まで検出できるような方法があればそれもあると嬉しいです。</p>

<h3>環境</h3>

<ul>
<li>Ubuntu 18.04.3 LTS</li>
<li>Bash</li>
</ul>
