---
layout: post
title: "JasperReportsの文字化けについて"
date: 2018-09-13 08:33:00
categories: java
---
<p>はじめまして<br>
開発環境EclipseにおいてGUI計算プログラムを作成しています。(javaFX)<br>
プログラムの結果を帳票ツールのJasperReportを利用して出力することが目的です。</p>

<p>テンプレートとしたjrxmlを用意して、JavaのBeanクラスからデータを渡しています。<br>
java側で動的にjrxmlをコンパイルし、printをJasperViewerで表示する形です。<br>
また、データには、日本語文字列、数字など様々な値をすべてStringクラスでフィールド設定しています。テンプレートのフィールドテキストは、MSゴシックを選択しています。</p>

<p>このソースを開発環境上で、はしらせた場合にはViewerで表示がされ希望通りの結果となります。（日本語の出力も可）</p>

<p>しかし、このプロジェクトをEclipseで、build.fxbuildを用いて、<br>
build.xmlを作成してインストーラーを作成し、windowsへインストールした場合、beanから取得されたフィールド値が文字化けします。（日本語のみ）</p>

<p>Stringクラスの保持する文字コードだろうと思い<br>
予め文字コードを宣言して下記をbeanのセッターメソッドへ追記しました。</p>

<pre><code>    new String(String.getBytes()."UTF-8")
</code></pre>

<p>結果は再度ビルドしなおしても変わらずでした。</p>

<p>以下個人的に考察した事項です。</p>

<p>・コンパイル時にbeanメンバのString（UTF-16?）の文字コードが変わってしまうのか<br>
・そもそも変換の仕方が違うのか<br>
・jrxml側のフィールドテキストでエンコード指定ができるのか</p>

<p>などですが、１日中ググっても解決に至らずお手上げ状態です。</p>

<p>みなさんご教授お願い致します。</p>

<p>追記</p>

<p>プログラミングは、家のノートとデスクトップでやっていまして、デスクトップ(win10)ではeclipseでシステムエンコーディングはutf-8、eclipseワークスペース設定も同様でした。<br>
ノート(win7)の確認が取れてませんが、怪しい可能性があります。</p>

<p>どこかで見た内容ですが、<br>
eclipseのワークスペースでutf-8等文字コードを設定しても、別の環境で作成または編集保存をしたjavaファイルを、eclipseがコンパイルするときに別の文字コードで実行してまう。<br>
事実であれば、別環境(別デフォルトエンコーディング)でプログラムしていることで、文字コードが混在した状況なのかもしれません。</p>
