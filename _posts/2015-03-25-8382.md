---
layout: post
title: push通知を拒否の状態でアプリの削除→再インストールを行った場合、設定で初期状態が一部許可になっている
date: 2015-03-25 11:14:45
categories: ios
---
<!-- {% raw %} -->
<p>手順：<br>
1.アプリをインストール、起動<br>
2.デバイストークン取得のロジックが走り、push通知を許可するか聞かれる→許可<br>
3.iOSの設定からアプリごとのpush通知設定で拒否にする<br>
4.アプリを削除して、再インストール<br>
5.アプリ起動後、設定からアプリのpush通知設定を確認すると、「通知を許可」に変更されており、かつ「ロック画面に表示」のみ許可という中途半端な状態になっている。</p>

<p>ただし許可になってはいるものの、デバイストークンの取得は行われません。<br>
（拒否にしたことを覚えている？）</p>

<p>補足として言語はswiftで、デバイストークンの取得ロジックはAppDelegateのdidFinishLaunchingWithOptionsで記述しています。<br>
また、iOS8.1, 8.2どちらでも再現します。</p>

<p>これは正常な動作なのでしょうか。</p>
<!-- {% endraw %} -->
