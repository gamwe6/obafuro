---
layout: post
title: phpの記述でtxtファイルの情報を加工して抽出したいです。
date: 2019-07-26 20:45:08
categories: php
---
<p>大変お世話になっております。</p>

<p>以下の様な内容のテキストファイル（example.txt）があります。</p>

<pre><code>example.txt

reserve_id =&gt; 23 product_id =&gt; 34383898 payment_id =&gt; 23234 
・・・・・・・
</code></pre>

<p>上記のproduct_idを下記のようなphpファイルを利用して取得し、数字の箇所のみを変数に代入する必要があります。</p>

<p>以下の記述のsubstrは期待通り、数字のみを取得し、変数に代入できる様ですが、product_idの桁数の増減に伴い、機能しなくなることも想定されます。</p>

<p>それらを勘案しどのような記述で数字のみを取得できるかお教え願いませんでしょうか。</p>

<pre><code>&lt;?php

$contents = file("example.txt");

$txt_product_id = $contents[2];
$product_id = substr("$txt_product_id", -6, -3);

echo $product_id;

?&gt;
</code></pre>

<p>現状の形態<br>
product_id => 34383898</p>

<p>以下の様な形態で取得し変数に代入したいです。<br>
34383898</p>

<p>追記：以下の二点に関してご教授いただければ幸いです。</p>

<p>①ご教授頂きました記述手法でいろいろと試しましたが、どこかが抜けているためか、どうしてもエラーになります。エラーを吐き出す設定にしておりませんので内容は分かりませんが、今回の目的である”数字の箇所だけを変数に代入する”ということを実現するために、”私の提示した内容及び、ご教授の内容のどの情報が実際必要になるか”、お教え願いませんでしょうか。</p>

<p>②phpである必要はございませんが、これ以外にこのproduct_idをDBに挿入する作業がございます。このexample.txtはリモートサーバーで随時更新され、当phpのサイトを常にクライアントで立ち上げておく必要がございます。お聞きしたいのは、どの様な開発言語、システム的な設定でも宜しいので、当phpのサイトを立ち上げることなく、example.txtの最新情報を随時抽出し、そしてDBに挿入することができる様なことは可能でしょうか？</p>
