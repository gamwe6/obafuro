---
layout: post
title: Laravel5.5にてjwt-authで認証後のユーザー情報取得を行う方法
date: 2019-01-16 16:55:18
categories: laravel-5
---
<p>Laravel5.5でjwt-authを利用してapiを作っています。<br>
検索して得た情報でコントローラーにmeメソッドのようにして認証後のユーザー情報を取得しているのですが<br>
これだと、おそらくトークンの$claimsから得たsubのユーザーidより毎回DBから情報を取得することになるかと思います。（私の技術力でソースを追いきれませんでした。）<br>
SNSを作ろうと思っていて遷移するたびに毎回DBにユーザー情報を問い合わせくありません。<br>
Redisやファイルなどに認証情報を保持したいです。<br>
apiでなく通常のセッション使ったログイン認証のように<br>
getUser()でDBにアクセスすることなくユーザー情報を取得する方法が<br>
jwt-authを利用した場合でもありませんでしょうか？<br>
もしくは、そこは気にする必要はなくクエリキャッシュを効かせておけば多くのアクティブユーザーがいたとしてもユーザー情報の取得による負荷など問題ないでしょうか？<br>
例えば同時利用者数1000人など。</p>

<p>ご教授頂ければと思います。<br>
よろしくお願い致します。</p>

<pre><code>public function me()
{
    return response()-&gt;json(auth()-&gt;user());
}
</code></pre>
