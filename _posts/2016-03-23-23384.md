---
layout: post
title: clojureで「再代入できない」と言われる意図は何なのか
date: 2016-03-23 09:42:01
categories: clojure
---
<p><code>clojure</code>初心者です。<br>
非常に初歩的な質問ですみませんが、<code>clojure</code>といえども、<code>var</code>に対する再束縛は問題なくできると考えてよいのでしょうか？</p>

<pre><code>user =&gt; (def a 100)
user =&gt; a
; 100と表示
user =&gt; (def a 200)
user =&gt; a
; 200と表示
</code></pre>

<p><code>clojure</code>が変数(<code>var</code>のこと)の参照先オブジェクトを変更できないイミュータブルな性質を持つことは<code>java</code>等の経験から理解できます。</p>

<p>その一方で、関数型言語では「再代入」はできない、なんていう言葉も何度もそれとなく聞いておりまして、それはなんとなくそういうものなのかと思っていました。それゆえ、本日思わぬ形で上記の例に出会ってしまい、今までも似たようなものは見てたのでしょうが、はたと気がついて混乱しております。</p>

<p>私の拙い理解では、これだと再代入は「できている」、<code>clojure</code>流の言葉では「再束縛」が起きているとでも言えばいいのでしょうか、とにかく同じ<code>var</code>に別の値を結びつけることができています。</p>

<pre><code>user=&gt; (defn xyz []                               
         (let [abc 100]                    
              (let [abc 200] (+ abc 100))))
user=&gt; (xyz)
300
</code></pre>

<p><code>let</code> を使っても同じことです。</p>

<p>変数の値の再代入は他の言語でも普通にありますし、この動作がおかしいなどと言うつもりは毛頭ないのですが、いわゆる「関数型言語に再代入はない」的な言説が何を言わんとしているのかがわからなくなりました。再代入ができないのではなく、再代入を避けやすい、という意味で使われることが多いのでしょうか。</p>

<p>「プログラミングclojure」という本を読みながら学習しているのですが、このことについては特に記述がないか、見つけられません。なので、しょーもない質問とは思いますが、おかしな理解をするのも良くないので、どなたか教えてくださると嬉しいです。</p>
