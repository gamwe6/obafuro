---
layout: post
title: "物理型レプリケーションのデータ抜けについて"
date: 2018-06-15 02:58:13
categories: postgresql database
---
<p>あるシステムでPostgreSQL（9.3.2）をレプリケーション稼動させています。</p>

<p>レプリケーション構成は<code>synchronous_commit=local</code> の非同期です。</p>

<p>物理型のレプリケーション方式で且つ、非同期レプリケーション構成の場合、<br>
論理型のレプリケーション（MySQL等）で発生しうる様なプライマリからスタンバイへのデータの同期漏れの可能性がないかどうかを確認したいです。</p>

<p>完全同期の場合はスタンバイへのデータ抜けの可能性がないことは理解できますが、<br>
非同期の場合、例えばWAL転送時のTCP等で問題が発生した場合にWALトランザクションの幾つかの同期が漏れて、その分のスタンバイのデータが歯抜けになってしまう状態があり得るかどうかというところが知りたいところです。</p>

<p>確認する方法や、仮に同期漏れの可能性がある場合に、検知できるような仕組みがあるかどうか等の回答でも結構です。</p>

<p>よろしくお願いします。</p>
