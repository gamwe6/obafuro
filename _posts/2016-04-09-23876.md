---
layout: post
title: "変数名や関数名を変更した際、vimで置換する方法"
date: 2016-04-09 15:50:32
categories: vim 正規表現
---
<p>コードを書いていると、最初は<code>n</code>とか、いい加減な変数名をつけていたけれど、やっぱり途中で<code>count</code>とか、もう少しマシな名前にすりゃよかった、と思うことがあります。</p>

<p>この場合、単純に <code>s/n/count/g</code> では、大抵うまくいきません。<code>print</code>が<code>pricountt</code>になるなど、多くの関係のないものまで、置換されてしまうからです。</p>

<p>例えば、マッチ範囲を限定するvimの正規表現方言の、<code>\zs</code>, <code>\ze</code> を利用して<br>
<code>s/(^|\H)\zsn\ze($|\W)/count/g</code> とすると、前後に英数字があるものはマッチしなくなりますが、これを毎回打つのはあまりに面倒です。</p>

<p>こういった場合に便利な、うまい方法はないでしょうか。</p>

<p>なお、言語仕様により付けられる変数名は変わってきますが、ここではとりあえず「英数字とアンダースコアのみからなる。ただし、1文字目には数字は来ない」ルールに対応できればいいものとします。</p>
