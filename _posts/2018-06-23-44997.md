---
layout: post
title: "Ubuntuのユーザー権限がGUIに反映されない"
date: 2018-06-23 01:58:24
categories: ubuntu google-cloud
---
<p>GCEでUbuntuをXRDPで接続して使う環境を作りました。Ubuntuは17.10です。</p>

<p>新しくSSHでaユーザーを作り、sudoグループに追加しました。<br>
でも、Ubuntuにログインしたら、一般ユーザーのままでした。</p>

<p><code>usermod -aG</code>などで管理者権限つけても、デスクトップのユーザーの情報は一般のままです。</p>

<p>GCE特有のグループを見つけたので、追加させましたがだめでした。</p>

<p>Googleのアカウントのユーザーは、Ubuntuでは管理者権限ついています。<br>
そのユーザーが参加しているグループを確認して追加しました。</p>

<p>google cloud platformで、Ubuntu17.10をインストールして、xrdpでリモートデスクトトップで接続しています。</p>

<p>このために新しく一般ユーザーを作り、sudoのグループに参加させました。</p>

<p>でも、デスクトップにアクセスしてソフトをインストールしようとしたら、「あなたはパーミッションがありません」と言う内容のエラーが出ました。</p>

<p>そのため、ユーザーを管理者権限で使えるようにしました。<br>
GCEで、adminに相当するグループを見つけたので、参加させました。<br>
ちゃんとログインをやり直しましたが、ユーザーの権限が、SSHでは変更できたのに、デスクトップでは変更されません。<br>
デスクトップでもログアウトして、入り直しています。</p>

<p>ユーザー権限を変えたあとにデスクトップのGNOME3に接続後出来なくなり、色々調べている中で、LXDEをインストールしました (VNCでも接続したいこともあったので)。<br>
XRDPでLXDEで、接続できています。でも、ユーザーの権限は、一般のままです。<br>
コマンドでは、ちゃんと管理者権限に変わったことを確認できています。</p>

<p>vino-preferencesなどで、コマンドでウィンドウが開いて設定できることを知っていますが、GCEではポートが使えないので、拒否されてしまいます。<br>
コマンドでウィンドウを開いて設定も出来ないので、困っています。</p>

<p>xrdpで、二つのユーザーをアクセス出来るように設定できたら、Ubuntuでデスクトップでも管理者権限になっている様に切り替えてアクセスできるのですが。</p>

<p>何か解決策が有りましたら、ぜひ、教えてください。</p>

<hr>

<ul>
<li><p>「コマンドではちゃんと管理者権限に変わった」、という事は以下のように確認しました。<br>
<code>su - name</code> で切り替えました。<br>
<code>sudo reboot</code> を実行して確認しました。<br>
また、コマンドラインで、＠の左に変更したユーザー名が表示されて確認しました。</p></li>
<li><p>デスクトップのユーザーの情報は一般のまま、というのは以下の画像のような状態です。<br>
<a href="https://gyazo.com/02e0e33d4c943dfd9af506d44bb22ca3" rel="nofollow noreferrer">https://gyazo.com/02e0e33d4c943dfd9af506d44bb22ca3</a></p></li>
</ul>
