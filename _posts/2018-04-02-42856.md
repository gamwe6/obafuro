---
layout: post
title: Webサービスのメソッド呼び出し前にクラス情報を取得して処理したい
date: 2018-04-02 01:27:54
categories: java java-ee jax-rs
---
<!-- {% raw %} -->
<p>JAX-RS (WildflyのRestEasy）でWebサービスを作っています。<br>
自作のアノテーションをWebサービスのメソッドなどに付与して、メソッドが呼ばれる前の共通の処理でそれを識別し、何らかの処理を組み込めるようにしたいです。</p>

<p>※今回やりたいのはCSRF対策のトークンのチェックを必要とするかどうかを、アノテーションで区別したいだけですが、他にも色々使いたいと考えています。</p>

<p>少なくとも、サーブレットフィルタ <code>javax.servlet.Filter</code>を使えば、Webサービスのメソッドの呼び出し前に処理を割り込ませられることは、分かっています。<br>
ただこれだと、「今回のHTTPリクエストで実際に呼び出されるWebサービスのクラスはどれか？」ということが分かりません。</p>

<p>クラスさえ特定できれば、リフレクションでアノテーションを取り出せるので、あとはいくらでもやりようがあるのですが・・・<br>
もちろん、やろうと思えば、アプリケーション全体のクラスから、<code>@Path</code>を探したりして解析することはできなくは無いと思いますが、これはJAX-RSがやってくれる処理を再開発することになるので、そこまでやろうとは思いません。</p>

<p>何か良い（標準的な）方法は無いでしょうか？</p>
<!-- {% endraw %} -->
