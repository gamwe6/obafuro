---
layout: post
title: "null文字判定と置き換え"
date: 2015-06-16 09:17:33
categories: perl
---
<p>読み込んだCSVファイルから、nullをスペースに置き換えて出力したいです。</p>

<p>nullは,,のところです。<br>
1レコード17項目です。</p>

<p>読み込みファイル<br>
01,,01,4ｶﾅ-0001,５漢字－０００１,６,７年月-0001,８日付-0001,９－０００１,１０ー０００１,１１ー０００１,１２ー０００１,3,4,１５ー０００１,6,17000001<br>
02,0002,,4ｶﾅ-0002,５漢字－０００2,６,７年月-0002,８日付-0002,９－０００2ｅ,１０ー０００２,１１ー０００２,１２ー０００２,3,4,１５ー０００２,6,17000002</p>

<p>出力<br>
＊△は半角スペース<br>
01,△△△△,01,4ｶﾅ-0001,５漢字－０００１,６,７年月-0001,８日付-0001,９－０００１,１０ー０００１,１１ー０００１,１２ー０００１,3,4,１５ー０００１,6,17000001<br>
02,0002,△△,4ｶﾅ-0002,５漢字－０００２,６,７年月-0002,８日付-0002,９内容－０００2,１０ー０００２,１１ー０００２,１２ー０００２,3,4,１５ー０００２,6,17000002</p>

<pre><code>        open IN2, "&lt;:encoding(utf8)", "$input_FILE" or die;
        open OUT2, "&gt;:encoding(utf8)", "$output_FILE" or die;

        while ( my $line2 = &lt;IN2&gt;) {
            # 改行を削除
            chomp $line2;

            # レコード前後の""を外す
            $line2 =~ s/^"//;
            $line2 =~ s/"$//;

            # 1レコード項目ごとに分割
            my @data2 = split(/,/, $line2);

            # レコードにnullが含まれている？
            if ( $line2 =~ undef ) {
                $line2 =~ s/$line2/ /g;
                print "nullがあったよ!\n";
            } else {
                print "nullないよ！\n";
            }

            print OUT2 join (",", @data2),"\n";

        }
        close IN2;
        close OUT2;
</code></pre>

<p>undefのところを\0にしても反応がありませんでしたが、undefは反応し、ディスプレイに表示もされましたが、出力ファイルにスペースが出力されておらず、判定のみで置き換えができていませんでした。よろしくお願いします。</p>
