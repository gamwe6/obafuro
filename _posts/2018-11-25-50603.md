---
layout: post
title: Rでの特定データの順位付け
date: 2018-11-25 08:12:54
categories: r
---
<p>今，データフレームをとりこんで，例をあげるとこのようなかんじです。<br>
このデータの「v2」に関して，aとbでグルーピングをし，それぞれのグループの中で順位をつけたいと思っています。</p>

```
　　　   v1　　　　　v2　　　　　 v3　　　   v4
１　　H２９年　　　　a　         120  　　   m
２　　H２９年     　 a 　　　　　130 　　　   m
３　　H３０年  　　　a           105 　　　  m 
４　　H３０年        b          110      　 m
５　　H３０年        b  　　　　 125      　 f
```

<p>そのために，以下の式をつくりました。※データフレームをxとおいています。</p>

```
 x %&gt;%
    +  dplyr::group_by("x$v2") %&gt;%
    +  dplyr::mutate(good_ranks = order(order("x$v12", decreasing=TRUE)))
```

<p>しかし，<br>
 UseMethod("group_by_") でエラー: </p>

```
'group_by_' をクラス "character" のオブジェクトに適用できるようなメソッドがありません 
```

<p>とエラーが出てきてしまいます。</p>

<p>どうすればよいでしょうか。<br>
また，上記にあげた式に関わらず，グルーピングしたうえで，順位づけができるものがございましたら，ご教授ください。<br>
ちなみに，tapplyをつかったところ，複数のグループに対してはうまく順位付けができませんでした。</p>

<p>初歩的なところで申し訳ございませんが，よろしくお願いします。</p>
