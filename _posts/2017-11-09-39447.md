---
layout: post
title: "mysql で定期観測したデータから、変更があったレコードのみ選択したい"
date: 2017-11-09 05:57:28
categories: mysql sql
---
<p>例えば、スタックオーバーフローの自分の信用度を定時観測していたとします。(今回やりたいことは、たぶん stackexchange の api たたけば取得できそうですが、具体例として聞きたいので、 mysql の中で完結するような方法を探しています。)</p>

<p>そうすると、たとえば</p>

<pre><code>observed_at,reputation
2017-11-1,1000
2017-11-2,1000
2017-11-3,1010
2017-11-4,1010
2017-11-5,1010
2017-11-6,1045
2017-11-7,1045
2017-11-8,1045
</code></pre>

<p>のようなデータが select できます。</p>

<p>この中から、 reputation に変化のあった最初のレコードたちを select したいと思いました。</p>

<pre><code>observed_at,reputation
2017-11-1,1000
2017-11-3,1010
2017-11-6,1045
</code></pre>

<h3>質問</h3>

<ul>
<li>mysql で、観測日時・その値のレコード列があったときに、データ値が変化した最初の観測だけを select するようにはどうしたらよいでしょうか？</li>
</ul>

<h3>追記</h3>

<ul>
<li>日付に漏れは、あっても対応できた方がうれしいです。何かしらの理由で定時観測が失敗する可能性があるので。。</li>
</ul>
