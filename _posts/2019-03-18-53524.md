---
layout: post
title: Cドライブに書き込みできなくなる
date: 2019-03-18 10:21:51
categories: windows vmware
---
<p>Windows Server 2012 R2のIIS上で動作しているアプリ（ASP.NET）で、<br>
「System.IO.IOException: ディスクに十分な空き領域がありません。」<br>
が発生するようになってしまいました。<br>
テキストファイルにログを出力しようとしたときに発生していますが、確認したところ、このアプリに限らずCドライブへの書き込みができなくなっていることがわかりました。</p>

<p>○状況<br>
・WindowsはVMware上で動作しています。<br>
・Cドライブには35GB程の空きがあります。<br>
・同じディスクにあるEドライブには書き込みができます。<br>
・Cドライブも読み取りはできます。Eドライブや別のサーバーにあるフォルダへファイルをコピーすることも可能でした。<br>
・Cドライブ内のフォルダに対して空のフォルダや空のテキストファイルを作成しようとした場合でも、「十分な空き領域がありません」と表示されて失敗します。<br>
・ファイルを削除しようとする場合、エクスプローラーの表示上は一旦消えますが、実際は削除できておらずF5で更新するとまたファイルが表示されるようになります。<br>
コマンドプロンプトからのdelやrmdirでも削除はできません。<br>
・Windowsを再起動しても解消しませんでした。<br>
・イベントビューアを確認しても上記のエラーが最初に発生した時間帯にはログがありませんでした。<br>
ただ、再起動後はイベントビューアにログが増えていくようになりました。<br>
この機能に関してはCドライブに書き込みができるようになったようです。<br>
・バックアップから数日前の状態に戻したところ復旧しましたが、同じくらいの日にちが経ったところで再発しました。</p>

<p>このような状況を経験されたことがある方はいらっしゃらないでしょうか？<br>
他に確認すべき箇所の心当たりなど、情報をいただけるとありがたいです。</p>

<p>※3/20追記<br>
回答いただいた皆様ありがとうございます。<br>
新しく仮想環境を作り直す方向で進んでいます。<br>
・シン プロビジョニングになっていました。<br>
・ホスト側の容量は足りていました。<br>
・この状態になってもEドライブには書き込みや削除ができます。</p>
