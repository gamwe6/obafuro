---
layout: post
title: Laravelのバリデーションでregexを指定すると、入力フォームで空欄が送信できなくなる。
date: 2018-10-01 09:45:30
categories: php laravel
---
<p>Laravelを使って、入力フォームを作成しています。<br>
バリデーションのルールで正規表現を使って、<strong>４桁の数字、または空欄</strong>を指定して、入力チェックを行いたいのですが、regexを指定した時点で空欄がバリデーションに引っかかってしまいます。</p>

<p>例えば、</p>

```
$rules = [
    'value1' =&gt; ['regex:/^\d{4}$/'],
    'value2' =&gt; ['regex:/^(\d{4})?$/']
    'value3' =&gt; ['regex:/^(\d{4}|\s*)$/'],
    'value4' =&gt; ['regex:/^(\d{4}|\n*)$/'],
    'value5' =&gt; ['regex:/^(\d{4}| *)$/']
];
```

<p>このような方法は試しましたが、空欄で送信するとバリデーションに引っかかります。<br>
この他にも考えられる方法は試してみましたが、出来ません。<br>
そもそもregexを設定した時点で空欄も無効になっている気がします。</p>

```
'value' =&gt; ['regex:/\s*/']
```

<p>ちなみに\dを抜いて、↑のような方法や</p>

```
'value' =&gt; ['regex:/.*/']
```

<p>↑も試しましたが、両記とも全角スペースだと通りますが、半角スペース、空欄の場合はダメでした。</p>

<p>どのように設定すれば良いのでしょうか？</p>
