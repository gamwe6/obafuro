---
layout: post
title: "サーバー（node.js）内の変数の値を、クライアント（javascript）の変数に格納したい"
date: 2016-04-23 21:23:10
categories: javascript monaca html5 node.js ajax
---
<p>お世話になります。</p>

<p>node.jsで、heroku上にhttp"s"サーバー(httpサーバーでない)を実装しようとしています。<br>
クライアント側は、monaca（html5+javascriptベース）で実装しようとしています。</p>

<p>下記のように使いたいと考えています。</p>

<p>１．クライアントからサーバーのURL（https）にアクセス。<br>
２．クライアントの情報を元に、サーバーでトークン（文字列）を作成。トークンはサーバー内のjavascriptの変数(key_server)に格納される。<br>
３．サーバーのトークン（文字列）を、クライアントのjavascriptの変数（key_cliant）に格納。<br>
４．クライアント←→クライアントの通信は全て暗号化したい。</p>

<p>このうち、３．について、どのような手段を用いて、サーバー内の特定の変数内の文字列をクライアントの変数に格納すればよいか、よくわからない状況です。</p>

<p>具体的には、クライアントはajaxを使うのではないかと考え、</p>

<pre><code>        $.ajax({
            // サーバーURLの設定
            url: 'https:/xxx.xxx.xxx',
            // 非同期通信
            async: true,
            // Ajax通信の成功時、データ受け取り
            success: function(data) {
                console.log(data + "を受け取った");
                key_cliant = data;
            }
        });
</code></pre>

<p>といったコードを書いたのですが、dataとして、サーバー側のhtmlの情報を受け取ってしまう状況です。</p>

<p>サーバーjavascript内の変数（key_server）の情報を、選択的に、クライアントの変数に格納すればよいか、お知恵をお貸しいただければ幸いです。</p>

<p>また、httpsサーバーからajaxで情報を受け取る場合、その通信内容も暗号化されているという理解なのですが、それで正しいでしょうか。</p>

<p>（socket ioを使う場合、http/https通信とは独立して通信されるため、暗号化されないという理解で正しいでしょうか。そのため、実装が複雑になるのではないかと考え、ajaxを選んだ次第です。）</p>

<p>よろしくお願い申し上げます。</p>

<p>ーーーーーーーーーー【追記】ーーーーーーーーーー<br>
サーバー側は、</p>

<p>res.send(key_server);</p>

<p>としてキーを送るのではないかと思うのですが、クライアント側で、選択的にこの文字列だけを見つけ、クライアント側の変数に格納したい、という趣旨です。</p>
