---
layout: post
title: byte配列がメモリの大部分を占拠するのを解消したい。
date: 2015-07-23 09:40:55
categories: android android-volley
---
<!-- {% raw %} -->
<p><a href="https://ja.stackoverflow.com/questions/12528/%E5%86%99%E7%9C%9F%E3%82%92%E4%B8%80%E5%AE%9A%E9%87%8F%E8%AA%AD%E3%81%BF%E8%BE%BC%E3%82%80%E3%81%A8%E3%83%A1%E3%83%A2%E3%83%AA%E4%B8%8D%E8%B6%B3%E3%81%AB%E3%81%AA%E3%81%A3%E3%81%A6%E3%81%97%E3%81%BE%E3%81%86%E3%81%AE%E3%81%A7%E3%81%99%E3%81%8C">写真を一定量読み込むとメモリ不足になってしまうのですが</a><br>
という質問をしたものです。</p>

<p>メモリ不足をどうにかしたくてとりあえずAsyncTaskを利用した読み込みを試してます。<br>
まだ写真を元のサイズのまま読み込んでいるので当然Bitmapのサイズが大きいのはまだいいのですが、キャッシュの仕組みを一切実装していないのにもかかわらずメモリの使用量が限界を突破するのがひっかかります。</p>

<p>ヒープダンプを調べてみると相変わらずbyte配列が一番メモリを消費しているらしいのですが、そもそもそのbyte配列を一体誰が作成しているのかを調べる方法はありますか？<br>
多分前ページの何かしらのデータを持ったままになっているのでは？と思うのですが、ページ遷移の時に前ページのデータを破棄するといったことをするとしたらどうすれば良いでしょうか？</p>
<!-- {% endraw %} -->
