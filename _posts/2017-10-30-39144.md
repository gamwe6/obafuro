---
layout: post
title: 被演算子の評価順序について
date: 2017-10-30 05:28:05
categories: c++
---
<!-- {% raw %} -->
<p>「基礎から学ぶC++の教科書」という本で</p>

<blockquote>
  <p>大部分の演算において、被演算子の評価順序は決まっていません。<br>
  たとえば、式A+式Bという演算があったときに、式Aと式Bのどちらが先に評価されるかは決まっていません。<br>
  ですから、評価の順序に依存するようなコードを書かないように注意してください。次のコードの実行結果は、おそらく納得できるものにはならないでしょう。</p>
</blockquote>

<pre><code>  int n = 1;
  n = --n / --n;
  cout &lt;&lt; n &lt;&lt; endl;
</code></pre>

<p>と書いてありました。<br>
これを実際に実行してみると1と表示され、確かに予想していなかった結果でした。</p>

<p>ただ、これは評価順序が不定だからという理由では納得できません。</p>

<p>何故なら左から評価すれば、</p>

<pre><code>n=0/-1
</code></pre>

<p>なので、0。</p>

<p>右から評価すれば</p>

<pre><code>n=-1/0
</code></pre>

<p>で0で除算する事になりエラーとなり、<br>
評価順序がどちらの場合も1にはならないように思えるからです。</p>

<p>何故1になるのでしょうか？</p>

<p>「同じ数/同じ数」という形で評価されて1となっていると仮定すると、<br>
同時に評価されていると考える事できますが、<br>
そのような事はあるのでしょうか？</p>
<!-- {% endraw %} -->
