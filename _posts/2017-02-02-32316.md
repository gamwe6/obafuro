---
layout: post
title: 複数のモデルをまたがるRestなAPI設計
date: 2017-02-02 01:59:57
categories: rest url
---
<!-- {% raw %} -->
<p>表題のように、複数のモデルをまたがる場合のRestなAPI設計で迷っています。</p>

<p>例えば、このStackOverFlowをスマフォアプリ版を出すとします。<br>
またサーバがApiを提供することとします。</p>

<p>この時、トップページをクライアントで表示したいとします。<br>
すると必要なデータは、自身のUserデータ、Questionとそれに結びつくTag、求人広告、受信箱、実績、他の質問に結ぶつく他のユーザデータ。<br>
パッと思いつく限りだと、これぐらいの情報がトップを表示する際に必要そうな気がします。</p>

<p>これらのリソースをRestに従って一つずつとっていってもいいのですが、リクエスト数が増えサーバの負荷があがると思われます。<br>
そうなるとApi設計として、「top/」のようなURL形式でトップ画面に必要な情報を一気に持ってきて欲しいというような、要望が出ると思います。</p>

<p>そしてこの例は特殊なケースではなく、例えばアプリの起動時や、質問を見る時もこのように複数のモデルにまたがった情報を一気に取得したいという要望がある気がします。</p>

<p>こうなると少なくとも情報の取得する場合は、Restで一つ一つのリソースにアクセスするのはむしろ補助的な立ち位置となり、「init/」「top/」「question_info/」のような場合に応じたApiがメインになるような気がします。</p>

<p>こだわる必要性はないとは思うのですが、Rest的な思考からは外れていくように思います。<br>
そもそもアプリ系ではRest的なApiは向いていないのでしょうか？または、何か設計が間違っているのでしょうか？<br>
ご回答いただければ助かります。</p>
<!-- {% endraw %} -->
