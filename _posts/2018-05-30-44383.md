---
layout: post
title: DataFrameを用いてカテゴリカル変数を1特徴量の量的変数に変換する方法
date: 2018-05-30 01:05:53
categories: python pandas 機械学習
---
<p>後述のようなsample.csvを読み込んだDataFrame dfがあったときに、カテゴリカルな変数であるresidenceに一位のラベルを自動的にふるよい方法があれば教えてください。</p>

<p>pandas.get_dummies(df)を用いるとそれっぽいことができなくはないですが、東京カラム、神奈川カラム、、、などと特徴量の変数の数だけ、新しい特徴量ができ、それらが0,1になってしまいます。<br>
やりたいこととは異なります。</p>

<p>また、mapを用いて<br>
df.map({"東京":1, "神奈川":2,,,})<br>
とすれば、求めたい形にはなりますが、自分で対応関係を辞書で手動定義する必要があり面倒です。</p>

<p>csvはあくまでも例なので実際に使いたいデータとは異なりますが、<br>
自動でふる良い方法があれば教えてください。</p>

<h2>sample.csv</h2>

<p>name,residence<br>
安倍,東京<br>
野田,神奈川<br>
菅,千葉<br>
鳩山,埼玉<br>
麻生,神奈川<br>
,,,<br>
伊藤,沖縄</p>

<p>↑1000行くらいある</p>

<h2>こういう風にしたい</h2>

<p>name,residence<br>
安倍,1<br>
野田,2<br>
菅,3<br>
鳩山,4<br>
麻生,2<br>
,,,<br>
伊藤,47</p>

<p>東京は1, 神奈川は2, 千葉は3, 埼玉は4, 沖縄は47など。</p>
