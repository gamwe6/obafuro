---
layout: post
title: ContentProviderのquery処理にかかる時間を実用出来るレベルに短縮出来ないか試行錯誤しています。
date: 2017-02-02 06:21:04
categories: android android-asynctask
---
<!-- {% raw %} -->
<p>現在、5万件ほどのデータを保持しているテーブルから全件データ取得し、<br>
取得したデータをリストに一覧表示する際にかかる時間を短縮出来ないか試行錯誤しています。</p>

<p>テストした実機は Galaxy Nexus AndroidOS:4.22 です。</p>

<p>試したのは、以下の３点です。</p>

<p>・AsyncTaskを複数使用する<br>
→AsyncTaskのスレッド数が5個までで11タスク動かそうとしても上手くいかず、処理は完了しませんでした。(ログで確認しましたが、9タスクほど完了した時点で処理が終了してしまいました・・・)</p>

<p>・SELECT文の修正<br>
→select * 〜 になっていたのを試しにデータのタイトルだけ取得するようにしましたが、それでもまだ約20秒から30秒ほど掛かってしまいます・・・</p>

<p>・contentProviderClientを使用<br>
→僅かながら効果はありましたが、上記のSELECT文の修正をあわせて使っても実用性に欠ける結果となりました。</p>

<p>後残っているのは、<br>
Twitterなどの様にListviewが終端までスクロールされた時に追加で読み込みをするしかないのかなと思っています。<br>
ただ、これはこれで他の箇所への影響が多いため可能ならば回避したい所ではあります・・・</p>

<p>解決のヒントになるような些細な事でもいいので、<br>
どうか回答よろしくお願い致します。</p>
<!-- {% endraw %} -->
