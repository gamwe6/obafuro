---
layout: post
title: "iOSでレポート（文章、図などを含む）画面を作りたい"
date: 2016-03-15 05:23:03
categories: ios swift objective-c
---
<p>iOSのアプリで一連の操作をしたのちに結果（レポート）を表示したいと思います。結果のフォーマットはありふれたもので、概略は</p>

<p>---------------------（以下概略）</p>

<p>基本情報<br>
ユーザ名：〜<br>
日時：〜<br>
総合スコア：90点</p>

<p>グラフ<br>
　ここにグラフを表示する</p>

<p>詳細結果<br>
　ここに表（UICollectionView）を表示する</p>

<p>---------------------（以上概略）</p>

<p>のようなものです。各々の内容は固定ではなくプログラムが生成します。</p>

<p>検討したものは以下の通りです。</p>

<ol>
<li><p>WebView<br>
以前のバージョンで使用しました。ベースのHTMLを作成して、動的に変更したい箇所の文字列を置換してUIWebViewに与えるというものです。正しく動作しましたが、iOS-Chartsなどのライブラリを使ってみたいため今回はUIKitなどiOSの機能で作れる方法を探しています。以前はJavaScriptのライブラリでグラフなどは描画していました。</p></li>
<li><p>オートレイアウト<br>
UIScrollViewを貼り、その中にUITextFieldなどを配置し、オートレイアウトで位置を決めていきます。できることはできるでしょうが、ものすごく大変な気がします。また柔軟性もないと思います。たとえばグラフのところに棒グラフを貼っていて、さらに円グラフも追加しようと思ったらまたレイアウトのやり直しになります。</p></li>
<li><p>UIStackView<br>
オートレイアウトよりは手間は少ないと思いますが、調査中です。</p></li>
<li><p>UITextViewにaddSubViewする<br>
固定テキストの属性をstoryboardで決められるので良さそうですが、サブビューの位置を決めてやる必要があるのでレイアウトの手間はかかります。</p></li>
</ol>

<p>期待するものは、たとえばですが</p>

<pre><code>reportView.addSection("基本情報")
reportView.addItem("ユーザ名：\(userName)"
reportView.addItem("日時：\(date)"
...

reportView.addSection("グラフ")
let barChartView = BarChartView( ... )
barChartView.data = ....
reportView.addView(barChartView)

reportView.addSection("詳細結果")
reportView.addView(detailedView)
</code></pre>

<p>のように足していくと実行した順に末尾に追加され、適切にレイアウトされるものです。これはイメージなので必ずしもこの通りでなくても構いません。必要な項目をビューに順次教えてやるとレポート（文書）ができあがると助かります。HTMLやLaTeXのようなマークアップ言語が適している分野です。またデザインセンスもないので、見出しの大きさなども自分で細かく調整するのではなくフレームワーク側できれいに作成されると見栄えがよくなると思います。</p>

<p>このような需要を満たす標準あるいは外部のフレームワークやライブラリがあれば教えてくださると幸いです。レポートを表示するというのは比較的ありふれている機能だと思いますが、日本語と英語で色々調べても見つけることができませんでした。</p>

<p>よろしくお願いします。</p>
