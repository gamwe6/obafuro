---
layout: post
title: テキストファイル読み込みの際のエンコードが勝手に変わる？
date: 2015-05-15 05:43:20
categories: python テキストファイル
---
<p>環境<br>
- Windows7<br>
- Python2.7<br>
- Sublime Text3</p>

<p>対象はヘッダーを含む16bitのImgファイル（X線測定で得た画像ファイル）です．<br>
ヘッダーの編集を自動化するために，テキストファイルとして読み込んで一部を書き換える，ということをしようとしています．</p>

<p>ファイルサイズが14Mbと比較的大きいため，コーディングしているときは，ヘッダー部だけをあらかじめ切り出し，拡張子をimgにしたファイルを使用していました．</p>

<p>そのときは下のように，ファイルをエディタで開いたときと同じような配列</p>

<pre><code>522d 4158 4953 2d43 5320 312e 302d 322e 3020 2020 476c 7963 696e 6520 2020 2020 2020 2020 2020 2020 7472 6967 6f6e 616c...
</code></pre>

<p>が取り出せていたのですが，いざ元のimgファイルに対してプログラムを実行したところ，取り出せたのは</p>

<pre><code>R-AXIS-CS 1.0-2.0   Glycine             trigonal    @\xe19\xc1@\xe19\xc1@\xaff\xcfB\xb4\x00\x00B\xb4\x00\x00B\xf0\x00\x00P31\x00m       ...
</code></pre>

<p>のように，エンコードが変わった（？）ものになってしまいました．</p>

<p>単にファイルをopen()してreadline()しただけなのですが．．．</p>

<pre><code>with open('sample.img', 'rb') as f:
    for i in range(60):
        data = []
        list1 = f.readline()
        data.append(list1)
print data
</code></pre>

<p>普通に16進数の配列として取り出すにはどうしたらよいでしょうか？<br>
そもそも，テキストとして開こうとしているのが間違いなのでしょうか?</p>

<p>文字コードなどに詳しくないので，何が起きてるかさっぱりわかりません．<br>
よろしくお願いします．</p>
