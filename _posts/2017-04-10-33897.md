---
layout: post
title: AWS インスタンスを、イメージを作成している途中で start しても問題ないか
date: 2017-04-10 04:32:22
categories: aws
---
<!-- {% raw %} -->
<p>ec2 インスタンスをストップして、stopped の状態になったのちに、 CreateImage を行って、その後にインスタンスを再度 start する場合を考えます。</p>

<p>このとき、インスタンスの start は、 AMI の作成の完了を待つ必要がありますか？</p>

<p>というのも、 AMI の作成は、その操作が実行されると、「作成中」状態の AMI が作成されて、ある一定時間の後に、その AMI が ready になります。もし ready になる前に launch しても問題ないのだとしたら、 AMI 作成命令を行った時点でその時点のディスク情報はどこかしらに保持されていることになり、だったら何で AMI は一瞬で ready にならないのか、と疑問になります。怖いのは、AMI の作成は、元のインスタンスの、その時点のボリュームを利用しているパターンで、これが発生していた場合には、作成された AMI は不整合な状態になっている可能性があります。</p>

<p>この、 ec2 のインスタンスと AMI の動作の細かい仕様を見つけられずにいるので、質問しています。</p>
<!-- {% endraw %} -->
