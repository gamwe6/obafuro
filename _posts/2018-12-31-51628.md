---
layout: post
title: "awkで正規表現のキャプチャの利用方法"
date: 2018-12-31 06:41:26
categories: 正規表現 awk
---
<p>ファル名 keisan.csv<br>
2018年月21日,abc,\387<br>
2018年6月23日,abc,"\1,418"<br>
2018年6月23日,abc,\276<br>
2018年6月30日,abc,\925<br>
2018年6月30日,abc,\619</p>

<p>awkで３番目のファイールドだけを下記などで、<br>
　　　　sum += $3<br>
計算したいのでが、取得したcsvファイルが３桁カンマや円マークが<br>
入っているため計算できません。</p>

<p>正規表現で桁数カンマと、ダブルクオーテーション、円マークを<br>
取り除いたのですが、awkの正規表現でも同じようなことは可能でしょうか</p>

<p>　　　　"?\(\d+),?(\d+)"?<br>
　　　　$1$2</p>

<p>最終的に、３番目のフィールドだけを計算したいのですが、<br>
awkではmatchを使うという記事を参考に書きを試して<br>
みましたが、うまくいきません。</p>

<p>awk -F, 'match($0, /"?\(\d+),?(\d+)"?/, a) {print a[1]}' keisan.csv</p>
