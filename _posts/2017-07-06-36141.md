---
layout: post
title: R言語におけるデータフレームから欠損値を除去する方法、欠損値しかない列の除去（もしくは0への変換）
date: 2017-07-06 08:02:42
categories: r
---
<p>たびたび初歩的な質問で申し訳ありません。<br>
下記質問では大変お世話になりました。<br>
<a href="https://ja.stackoverflow.com/questions/36105/r%E8%A8%80%E8%AA%9E%E3%81%AB%E3%81%8A%E3%81%91%E3%82%8Bmann-whitney-test-%E3%82%82%E3%81%97%E3%81%8F%E3%81%AFt-test-%E3%81%AE%E8%A8%88%E7%AE%97%E7%B5%90%E6%9E%9C%E3%81%AE%E5%87%BA%E5%8A%9B%E3%81%99%E3%82%8B%E6%96%B9%E6%B3%95">R言語におけるMann Whitney Test （もしくはt-test）の計算結果の出力する方法</a></p>

<p>今度は下記のようなデータの取り扱いについて、ご教授お願い出来ないでしょうか。</p>

```
       A1 A2 A3 A4
       31       54
       56    48 69
       11    13 14
       16    18 
             63 24
             28 22
       31    33 31
       36    78 31
       41    43 41
```

<p>とあるデータの大元の測定器からの出力が上記のようなexcelファイルであり、これまではexcelを使って空欄を削除し、上に詰めていました。</p>

```
       A1 A2 A3 A4
       31    48 54
       56    13 69
       11    18 14
       16    63 24
       31    28 22
       36    33 31
       41    78 31
             43 41
```

<p>このようなデータを<code>wilcox.exact</code>で実行すると、A2列に数字がないため（全てNA)にエラーがでました。そこで<code>Data &lt;- Data[ ,is.na(Data[1,]) == FALSE]</code>で1行目に数値データがないものを削除したのですが、列がずれると後々面倒かと思い、<code>Data[ ,is.na(Data[1,])] &lt;- 0</code>にて、1行目に数値データがない列のNAを全部0にしてみました。（そもそもこの列にデータが無いことは図により認識できるので、とにかく<code>wilcox.exact</code>が動けば良しです。）</p>

<p>しかし、excelでの処理を簡素化できないかと思い、</p>

```
       A1 A2 A3 A4
       31       54
       56    48 69
       11    13 14
       16    18 
             63 24
             28 22
       31    33 31
       36    78 31
       41    43 41
```

<p>上記のデータのまま、下記の処理ができないかと考えています。<br>
・列の値がNAしかないのものはNAを0にする。<br>
・その他の場合はNAを削除し、上に詰める。</p>

<p>NAを全て0にした場合、演算結果に影響がでるのでは考えていますが、NAを0にする方法も教えていただければ幸いです。</p>

<p>ご指導のほど、よろしくお願いいたします。</p>
