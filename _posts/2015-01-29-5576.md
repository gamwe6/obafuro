---
layout: post
title: MFCでの標準タイマーの精度をあげる方法ありますか？
date: 2015-01-29 13:13:14
categories: windows c++ mfc
---
<!-- {% raw %} -->
<p>MFCで１秒周期で処理を行うプログラムを作成していますが、<br>
標準のタイマーを利用するとほぼ毎秒に10ミリ秒〜15ミリ秒のずれが発生します。</p>

<p>マルチメディアタイマーを利用するとタイマーの精度問題は解決できますか<br>
他のライブラリと相性が悪く他ライブラリがクラッシュしてしまいます。<br>
プロジェクトの関係で他ライブラリは変更できません。</p>

<p>標準のタイマーの精度は上げる方法はありますか？<br>
あるいは標準のタイマーのズレを補正する方法はありますか？</p>

<p>ご教授よろしくお願いいたします。</p>

<p>-- 2015/02/01 --<br>
遅くなりましたが、時間がなかったのでとりあえずタイマーのズレを補正する方法で対応しました。<br>
補正の方法としては<br>
最初のマイマーのセットのタイミングで、基準時間と実行回数を設定し、<br>
基準時間より総ずれた時間とズレの平均値を計算し次のタイマーにその分を減算してセットしています。<br>
しばらく動かして見ましたが、ほぼ安定して動作しています。<br>
あとは1日1回基準時間と実行回数を初期化するロジックを追加すれば問題は解決できると思います。</p>
<!-- {% endraw %} -->
