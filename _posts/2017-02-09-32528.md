---
layout: post
title: 特定のカラムから算出できる値を、別のカラムに持たすべきか？
date: 2017-02-09 08:41:28
categories: データベース設計
---
<p>質問自体はタイトルの通りなのですが、理解しにくい質問なので例を書かせていただきます。</p>

<p>例えば、経験値とレベルが存在するゲームのDBを設計したいとします。<br>
経験値は一定値たまると、レベルが上昇します。そしてその経験値とレベルの対応表は別のテーブルで、マスターデータとして持っているとします。</p>

<p>この時に、レベルをDBに入れるべきか、入れるとしたらどのようにテーブルを設計するのか、で悩んでいます。</p>

<p>レベルは経験値とマスターデータから読み出し、アプリケーションないで計算して算出できるため、厳密には保存する必要性がありません。<br>
しかしレベルに依存するデータが色々（パラメータ上限とか、ダメージ算出とか）あった場合、毎回２つのテーブルからデータを読み込んで計算することになりため、DBの負荷とCPUのリソースを使用します。</p>

<p>ではレベルをDBに持たせてしまうと、今後はDB内に保存したレベルと経験値の不整合が起こるリスクを抱える事になります。</p>

<p>このような、特定のデータから算出できる値はどのように扱うべきでしょうか？<br>
よろしければご回答よろしくお願いします。</p>
