---
layout: post
title: GCCで同名のシンボルが含まれる複数のライブラリをリンクしたい
date: 2017-08-03 15:13:18
categories: linux c++ gcc
---
<p>困っています。助言お願いします。</p>

<p>同名の関数が使われている複数のモジュールをリンクしたいのですが、うまくいきません。</p>

<p>同じhogeというクラスが実装された複数のモジュールがあります。<br>
モジュールの中身は複数のcppとhでできており、そのうちのいくつかは他のモジュールにも同じものが含まれています、<br>
ここで、モジュールの中身に手を入れず、他のソースと一緒にビルドしたいのです。<br>
それぞれのモジュールは一つずつインターフェースとなるクラスを持っており、このクラスだけを公開する形で結合したいです。</p>

<p>分かりにくいかもしれませんが、よろしくお願いします。</p>

<p>【追記】<br>
分かりにくい質問で申し訳ありません。<br>
元々は静的ライブラリで実現したいと考えていましたが、調べた限りでは静的ライブラリは可視性の設定が出来ないらしいので、共有ライブラリが現実的なのでは？とも考えています。</p>

<p>エラーの内容ですが、まず普通にリンクしようとすれば当然多重定義エラーが発生します。<br>
そこで可視性をhiddenに設定して共有ライブラリを作成したのですが、今度はライブラリ内のシンボル同士がお互いを見つけられず、未定義のエラーとなります。</p>

<p>今回実現したい形としては、クラスや関数の可視性をそれぞれのライブラリファイル内のみにした上で、インターフェースとなるクラスのみを公開することです。</p>

<p>やはり名前空間で区切るしかないのでしょうか？</p>
