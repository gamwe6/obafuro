---
layout: post
title: "非同期処理のタイムアウト監視について"
date: 2018-04-17 00:23:15
categories: windows コマンドプロンプト
---
<p>お世話になります。<br>
Windowsバッチにて、非同期で実行した処理を監視し、処理時間に応じてタイムアウトとしたいです。</p>

<p>以下、行いたかった処理です。</p>

<p>【非同期処理】<br>
start aaa.bat</p>

<pre><code>for (
   aaa.batの戻り値を見てタイムアウト処理を行う
)
</code></pre>

<blockquote>
  <p>startコマンドで非同期で処理を行わせながら、以下のループ内でaaa.batの戻りを監視しそれによって処理を行う。</p>
</blockquote>

<p>と、したかったのですが、非同期で先に進んでしまうと、aaa.batの戻り値は受け取れないということで間違いないでしょうか？<br>
aaa.batの状態を検知したい場合、</p>

<p>1) aaa.bat内でファイル出力させるなどなにか別の状態を見てタイムアウトを判断する<br>
2) callの同期処理でaaa.batを呼び出し、aaa.bat内でタイムアウト処理を入れ込み戻りを返す。</p>

<p>上記1,2の話になりますでしょうか？<br>
また、非同期で動いているaaa.batを強制的に終わらせるには、PIDやイメージ名を取得して<br>
Killする以外ないでしょうか？</p>

<p>ご教授のほどよろしくお願いします。</p>
