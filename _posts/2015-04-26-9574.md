---
layout: post
title: "Open ID ConnectにおいてIDトークンが盗まれる可能性について"
date: 2015-04-26 15:16:41
categories: oauth
---
<p>Open ID Connectについて勉強中です。<br>
Client = WEBブラウザ、RP = WEBサーバー、OP = Googleなどが提供しているプラットフォーム、を想定しています。</p>

<p><a href="http://image.slidesharecdn.com/openidconnectintroseptember2013-131010025559-phpapp02/95/openid-connect-20139-8-638.jpg?cb=1381391826" rel="nofollow">この</a>Implicitフローをベースに質問させてください。</p>

<p>このフローを実装しているサイトをサイトAとします。悪意のあるサイトをサイトBとします。<br>
サイトAのサービスを利用するユーザーが、悪意のあるサイトBにアクセスしてしまったとします。そこでそのサイトBにおいて、サイトAのログイン用APIに意図せずアクセスさせられてしまい（フローでいうと0番目）、その後、フローの５番目までを実行されてしまい、IDトークンを盗まれてしまう可能性はないのでしょうか？（クロスドメイン制約があるので無理？）<br>
私はIDトークンに含まれるnonceというものの役割を理解していないので、このような質問をしているのかもしれません。nonceというランダムな値がサイトAのサーバーで作成され、その後、OPから帰ってくるIDトークンにも含まれるということは理解しているのですが、それが上述したIDトークンが盗まれてしまった場合にどう機能するのかがわかりません。</p>

<p>混乱の中での質問となり、要領を得ない質問で申し訳ありませんが、よろしくお願いします。</p>
