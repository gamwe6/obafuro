---
layout: post
title: iosアプリのIPv6対応について
date: 2016-06-16 08:34:45
categories: ios unity3d ipv6
---
<p>６月１日からAppleでのアプリ審査でIPv6 only Network環境での動作チェックがはじまりました。<br>
事前にその対応について備えていたのですが、いざ申請すると「IPv6では接続できないから却下」という旨の返答があり、審査が通過できない状態にあります。<br>
以下、行った対応です。</p>

<p>・Unityのバージョンを4.6.5から4.7.2へ変更　※Unityから公式にアナウンスがあったバージョン<br>
・Appleが通信できない、という指摘が入ったのはUnity標準の「WWW」クラスを使った通信箇所。<br>
・その他Appleからアナウンスがあった利用できない関数の確認</p>

<p>Appleにも質問を投げているのですが、クラッシュログを提出しないと答えない旨きています。<br>
現在、こちらの環境では</p>

<p>･NAT64環境で接続テスト、こちらの環境では正常に動作している<br>
※パケットモニターでIPv6になっているのも確認できています。</p>

<p>上記のようになっており、エラーすら把握できない状態にあります。</p>

<p>原因としては<br>
・こちらが用意した環境が不適切である可能性<br>
・導入しているプラグインが対応していない可能性(こちらは別途問い合わせ中)<br>
が考えられますが、何から手をつけていいかわからず、八方塞です。</p>

<p>どなたか知恵をかしていただけないでしょうか？<br>
よろしくお願いします。</p>

<p>iOS・Macともに指定されたバージョンへの更新は完了しています。</p>

<p>※一部文章に間違いがあったので訂正しました</p>

<p><strong>2016/06/20 追記</strong></p>

<p>相変わらずリジェクトを受けていますが、<br>
サーバーを「Appleからのアクセス」だけを限定した処理に切り分け、<br>
審査を提出しました。<br>
結果もIPv6で接続できない、という返答にかわりはなかったですが、<br>
通信が成功している場合もありました。<br>
※IPv6での接続ができている証拠かと思います。</p>
