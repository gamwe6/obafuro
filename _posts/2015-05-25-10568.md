---
layout: post
title: C#でList<構造体>とした時、ヒープメモリなのかスタックメモリなのか？
date: 2015-05-25 02:33:32
categories: c# unity3d .net メモリ管理
---
<!-- {% raw %} -->
<p>UnityのC#でコードを組んでいて疑問に思ったことなのですが、<br>
構造体はスタック領域を使うと書いてあるのですが、<br>
Listに関しては記述がなく、値型でない限りは参照型になるので<br>
ヒープ領域を使うと思っています。</p>

<h3>質問</h3>

<ol>
<li>List&lt;構造体>とした時は、どちらにメモリが確保されるのでしょうか？</li>
<li>また、スタックに確保されたか？ヒープに確保されたか？を知る方法はないでしょうか？</li>
</ol>

<h3>経緯</h3>

<p>UnityのC#ではヒープ領域がガベージコレクションで解放されないため、<br>
１度ヒープ領域が更新されるとアプリを落とすまでヒープを確保し続け<br>
アプリの確保メモリが非常に大きくなるため、スタックに移行できるものが<br>
あればスタックに移行したいと思い、このような質問をしました。</p>

<h3>環境</h3>

<ul>
<li>Unity 5.0.1f1</li>
<li>.NET 2.0</li>
<li>C# 4.0</li>
</ul>
<!-- {% endraw %} -->
