---
layout: post
title: ARで表示した3Dオブジェクトの位置を固定したい
date: 2019-01-16 02:20:08
categories: unity3d
---
<p>[実現したいこと]<br>
スマホやタブレットのカメラで実物のミニカーを検出すると、それに重ねて作成したエンジンの3Dオブジェクト(MAYAで作成したfbxファイル)が表示されるコンテンツを作ろうとしています。 </p>

<p>[発生している問題]<br>
ミニカーを検出し、エンジンの3Dオブジェクトを表示させることはできたのですが、カメラを動かすとそれに合わせてエンジンが動いてしまい、ミニカーにぴったり重なりません(最大でミニカー1台分ぐらいズレる)。<br>
カメラが動いても、エンジンはミニカーに重なったままの状態にしたいです。 </p>

<p>[試したこと]<br>
・エンジンの表示位置をMayaで設定した場合とUnityで設定した場合を試したが、どちらもカメラに合わせて動いてしまう。<br>
・エンジンを初期位置から動かさず(ミニカーからずれた状態)にMAYAからfbx出力し、取り込んだ時には表示位置にしっかり固定された。<br>
・上記より、エンジンの位置が原点(x,y,x=0,0,0)であれば、固定されるかもと考え、MAYA上で位置調整を行ない、Freeze処理を実施し、fbxを出力。<br>
それをUnityに取り込んで利用したがカメラに合わせて動いてしまった。<br>
・エンジンのファイルサイズ(35MB)が大きいことが影響しているかと考え、Unity上で四角い箱の3Dオブジェクトを作成し、表示させたが解決せず。<br>
・UnityARObjectAnchorで利用されているGenerateObjectAnchor.cs内のVector3で表示位置をを強制的に設定し、表示させたが解決せず。 </p>

<p>[補足情報（FW/ツールのバージョンなど）]<br>
・Unity2018.2.14f1<br>
・UnityARkitplugin UnityARObjectAnchor<br>
・Autodesk MAYA2017 </p>
