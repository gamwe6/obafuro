---
layout: post
title: SQLSERVERのメンテナンスプラン
date: 2019-01-10 00:19:19
categories: sql-server
---
<p>SQLSERVERのメンテナンスプランを利用していますが、うまく動作してくれません。<br>
メンテナンスプランで、以下の流れでトランザクションログの切り捨てを実行しています。</p>

<p>①データベースの整合性確認タスク<br>
　↓<br>
②データベースの圧縮タスク<br>
　↓<br>
③データベースのバックアップタスク<br>
　（トランザクションログのバックアップ）<br>
　↓<br>
④トランザクションログ領域の切り捨て(TSQLを実行）</p>

<p>うまく動作しないというのは、メンテナンスプランをManagemennt Studioで手動実行するとトランザクションログ領域の切り捨てまで正常終了しサイズも縮小するのですが、<br>
スケジュール実行すると正常終了しているにもかかわらずトランザクションログ領域の切り捨てが実行されていない状態で、サイズが縮小されません。</p>

<p>何かメンテナンスプランの実行に問題があるのでしょうか？</p>

<p>④ USE [XXXシステム_SQL] go DBCC SHRINKFILE (XXXシステム_SQL_log, TRUNCATEONLY) go </p>
