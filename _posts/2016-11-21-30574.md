---
layout: post
title: iOSの特定の端末にプッシュ通知出来ない
date: 2016-11-21 08:56:38
categories: ios push-notification
---
<!-- {% raw %} -->
<p>Apnsを使用していますが<br>
特定の端末(端末の設定等は他の端末に合わせてあります)で4G通信の場合に通知が届きませんでした。<br>
特定の端末でWi-Fiを使用している場合プッシュ通知が届きました。<br>
他の端末では4Gを使用している場合でもプッシュ通知が届いています。</p>

<p>●特定の端末の情報です。</p>

<ul>
<li>iOS Ver : 10.1</li>
<li>iPhone model : ME337J/A</li>
<li>(iPhone5s)</li>
</ul>

<p>■モバイルデータ通信</p>

<ul>
<li>モバイルデータ通信:ON</li>
<li>通信のオプション: ローミングオフ</li>
<li>インターネット共有:ON</li>
<li>モバイルデータ通信を使用:ON</li>
<li>Wi-Fiアシスト:ON</li>
<li>ネットワーク選択<br>
→自動</li>
</ul>

<p>■通知設定</p>

<ul>
<li>通知を許可:ON</li>
<li>通知センターに表示:ON</li>
<li>サウンド:ON</li>
<li>Appアイコンにバッジを表示:ON</li>
<li>ロック画面に表示:ON</li>
</ul>

<p>■お休みモード:OFF</p>

<p>特定の端末にプッシュ通知が届かないのはなぜでしょうか。<br>
端末の設定等は合わせてありますが少しでも心当たりのある原因等ありましたら教えていただきたいです。</p>

<hr>

<p>コメント欄が見ずらい為こちらに追記します。</p>

<blockquote>
  <p>１．開発上で、バージョンが古いアプリがインストールされている<br>
  　　→ 証明書が変更された後にインストールを行っていない。<br>
  　　→ 本番orデバッグ、一致しない通知を投げられている</p>
</blockquote>

<p>最新のアプリがインストールされていることを確認済みです。<br>
証明書等変更されてから数日後にインストールしている為問題ないと思います。<br>
通知は本番のものを使用しています。</p>

<blockquote>
  <p>２．保存したトークンが不一致</p>
</blockquote>

<p>サーバー側、アプリのログを確認し、トークンが一致していることを確認しました。</p>

<blockquote>
  <p>３．同時に送信した数が多い(最大送信バイト数に頭打ち)</p>
</blockquote>

<p>同時に送信した端末数は３台で、送信した内容としてはタイトルに４文字本文に４文字です。</p>

<blockquote>
  <p>４．通知を許可していない</p>
</blockquote>

<p>通知を許可していて、通知スタイルはバナーに設定しています。</p>

<blockquote>
  <p>５．通信状況が悪い</p>
</blockquote>

<p>キャリアの通信ですが通信状態は良好でした。</p>

<hr>

<p>iPhone本体の端末設定の<br>
通知→通知スタイル(アプリ毎)→ロックされていないときの通知のスタイルを<br>
「バナー」から「なし」に設定後、通知が届くようになりました。<br>
この現象について記載されている<br>
公式のドキュメントや参考サイト等ありましたら教えていただきたいです。</p>
<!-- {% endraw %} -->
